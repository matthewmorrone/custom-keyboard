diff --git a/.idea/caches/build_file_checksums.ser b/.idea/caches/build_file_checksums.ser
index 733cb12..e5cc4a2 100644
Binary files a/.idea/caches/build_file_checksums.ser and b/.idea/caches/build_file_checksums.ser differ
diff --git a/.idea/jarRepositories.xml b/.idea/jarRepositories.xml
deleted file mode 100644
index a5f05cd..0000000
--- a/.idea/jarRepositories.xml
+++ /dev/null
@@ -1,25 +0,0 @@
-<?xml version="1.0" encoding="UTF-8"?>
-<project version="4">
-  <component name="RemoteRepositoriesConfiguration">
-    <remote-repository>
-      <option name="id" value="central" />
-      <option name="name" value="Maven Central repository" />
-      <option name="url" value="https://repo1.maven.org/maven2" />
-    </remote-repository>
-    <remote-repository>
-      <option name="id" value="jboss.community" />
-      <option name="name" value="JBoss Community repository" />
-      <option name="url" value="https://repository.jboss.org/nexus/content/repositories/public/" />
-    </remote-repository>
-    <remote-repository>
-      <option name="id" value="BintrayJCenter" />
-      <option name="name" value="BintrayJCenter" />
-      <option name="url" value="https://jcenter.bintray.com/" />
-    </remote-repository>
-    <remote-repository>
-      <option name="id" value="Google" />
-      <option name="name" value="Google" />
-      <option name="url" value="https://dl.google.com/dl/android/maven2/" />
-    </remote-repository>
-  </component>
-</project>
\ No newline at end of file
diff --git a/README.md b/README.md
index bbdaefa..5b1bcec 100644
--- a/README.md
+++ b/README.md
@@ -1,104 +1,90 @@
-# Current Priorities #
-1. settings menu with reorderable list, used to change keyboard order and enable/disable them
-2. custom key settings' popups should contain three inputs: one to change the label, and one to change the value, and one to change its longpress value
-3. create a popup with two inputs that allows arbitrary search and replace
-4. color input to change key text, background, borders
-5. slider for key transparency
-6. number input/slider combined for specification of keypress delay
-
-### spellcheck/autocomplete ###
-+ reimplement
-+ include contact names
-+ learn new words
-+ adding entries on the fly
-+ autoreplace toggleable from keyboard predictions 
-+ autocomplete capitalization
-
-### clipboard ###
 + show clipboard contents after cut/copy
-+ page containing clipboard history
-+ choice of fifo or filo for clipboard history
-+ button to access recent clipboard entries
-+ instead of getting rid of last clipboard entry, send that one indefinitely
-+ append clipboard contents to file on cut or copy
-
-### customization ###
++ tabs on symbols page 
++ add toggle for whether or not the first member of the popup is sent upon release
++ convenience method for setting checks
++ press and hold to delete all space up to line end (while prev char is space)
++ don't cancel popup if it has a long press action
 + font color, background, border from settings
 + settings for numbers, colors, popupchars
-+ press and hold custom keys to change them
-+ macro customization
-+ drag control for keyboard height
-+ add and remove keys
-+ hide and show specific keys, especially in the top or bottom
-+ row with toggles from settings page
-+ add setting that allows specification of longpress delay
-+ add slots in the settings page for customizing the letters that appear on long press
-+ add toggle for whether or not the first member of the popup is sent upon release
 + reorder layouts from settings: draggable for layout management
++ more pinyin, combine with autocorrect
++ selection doesn't work with 4space
 + runtime modification/generation of layouts
 + generate keyboard programmatically
-+ key codes and labels customizable
-
-### functionality ###
-+ edit text popup for find/replace
-+ press and hold to delete all space up to line end (while prev char is space)
-+ move cursor and select text by dragging the space key
-+ if no selection, un/indent saves cursor spot, highlights all, then puts it back ¬±4
-+ selection doesn't work with 4space
++ page containing clipboard history
++ choice of fifo or filo for clipboard history
++ button to access recent clipboard entries
++ press and hold custom keys to change them
 + close by clicking outside popup
 + delete autoinsertions by pressing once
-+ swipe on spacebar + left and right swipe on spacebar
-+ slideable bar
-
-### under the hood ###
++ macro customization
++ selection moves while typing
++ select with manual cursor movement
++ move cursor and select text by dragging the space key
++ if no selection, un/indent saves cursor spot, highlights all, then puts it back ¬±4
++ draggable resize right on the front
++ drag control for keyboard height
++ adjust key size
++ key height change
 + include tags ffs
-+ script for autoreinstall
-+ convenience method for setting checks
-+ manually reimplement cut/copy/paste
-
-### bugs ###
-+ label size issue for high surrogates
-+ bug when autoshift
-+ wordfore only works for next word
-+ linenext and linelast probably don't work
-+ if there are too many entries in a keys popup, it doesn't render properly
-
-### layouts ###
-+ unicode input from exhaustive table
 + emoji 
-+ tabs on symbols page 
 + swiping, scrollable/swipeable areas
-+ math ‚áÑ numeric
-
-### nice to haves ###
-+ password buttons
-+ convert between fonts
-+ language detection
-+ calculation parsing
-+ edittext popup for temporary stuff
-+ change enter icon depending on input type
-+ selection pad
-+ selection moves while typing
-+ select with manual cursor movement
-+ get location as string, coordinates or address
-+ format numbers
++ swipe on spacebar + left and right swipe on spacebar
++ key codes and labels customizable
++ make popup keys repeatable
++ autoreplace toggleable from keyboard predictions 
++ release on popup for choice
 + settings opens up a drawer
++ 2nd bar changeable
++ selection pad
++ slideable bar
 + shortcuts with sigil
++ bug when autoshift
 + column from table
 + identify hash
-+ color input + tocolor & fromcolor
++ format numbers
++ press and hold space for layout page
++ instead of getting rid of last clipboard entry, send that one indefinitely
 + disable context menu in edittexts
++ color input + tocolor & fromcolor
 + nonliteral tab
-+ animations
-
-### popup-related ###
-+ popup contents should also be keys
++ you can use canvas to add a black layover to darken background
++ manually reimplement cut/copy/paste
++ math ‚áÑ numeric
++ hash out links
++ change enter icon depending on input type
++ wordfore only works for next word
++ convert between fonts
++ edittext popup for temporary stuff
++ 2d layout navigation
++ popup for arbitrary find/replace screen
++ separate out settings page for layouts and custom keys
 + layout of popup
-+ make popup keys repeatable
-+ release on popup for choice
++ popup contents should also be keys
++ if there are too many entries in a keys popup, it doesn't render properly
++ label size issue for high surrogates
++ animations
++ unicode input from exhaustive table
++ scrolling
++ add and remove keys
++ hide and show specific keys, especially in the top or bottom
++ row with toggles from settings page
++ add setting that allows specification of longpress delay
++ add slots in the settings page for customizing the letters that appear on long press
++ script for autoreinstall
++ password buttons
++ calculation parsing
++ autocomplete capitalization
++ append clipboard contents to file on cut or copy
++ linenext and linelast probably don't work
++ language detection
++ get location as string, coordinates or address
++ include contact names
++ learn new words
++ adding entries on the fly
 
 
-##### Settings #####
+=== Settings ===
 + system settings enable keyboard
 + choose keyboard
 + generate keyboard from text string and vice versa
@@ -128,4 +114,4 @@
     + toggle, states
     + popup choices
     + height width offset
-    + swipe left right up down
+    + swipe left right up down
\ No newline at end of file
diff --git a/app/build.gradle b/app/build.gradle
index a85a50b..d4c52e7 100644
--- a/app/build.gradle
+++ b/app/build.gradle
@@ -32,9 +32,6 @@ android {
 
 dependencies {
     implementation fileTree(dir: 'libs', include: ['*.jar'])
-    implementation 'androidx.appcompat:appcompat:1.1.0'
+    implementation 'com.android.support:appcompat-v7:28.0.0'
     implementation 'org.apache.commons:commons-lang3:3.8.1'
-    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'
-    implementation 'com.github.duanhong169:colorpicker:1.1.6'
-    implementation "com.github.skydoves:colorpickerpreference:2.0.0"
 }
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
index 0d230ad..1de9959 100644
--- a/app/src/main/AndroidManifest.xml
+++ b/app/src/main/AndroidManifest.xml
@@ -1,35 +1,18 @@
-<?xml version="1.0" encoding="utf-8"?>
-<manifest xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    package="com.custom.keyboard">
-    <uses-permission
-        android:name="android.permission.VIBRATE"
-        android:required="false" />
-    <uses-permission
-        android:name="android.permission.ACCESS_FINE_LOCATION"
-        android:required="false" />
-    <uses-permission
-        android:name="android.permission.INTERNET"
-        android:required="false" />
-    <uses-permission
-        android:name="android.permission.READ_USER_DICTIONARY"
-        android:required="false" />
-    <uses-permission
-        android:name="android.permission.WRITE_USER_DICTIONARY"
-        android:required="false" />
-    <application
-        android:allowBackup="false"
-        android:fullBackupContent="false"
-        android:icon="@mipmap/ic_launcher"
-        android:label="@string/app_name"
-        android:roundIcon="@mipmap/ic_launcher"
-        android:supportsRtl="true"
-        android:theme="@style/AppTheme"
-        tools:ignore="GoogleAppIndexingWarning">
-        <activity android:name=".CustomEditTextPreference" />
-        <activity
-            android:name=".Main"
-            android:label="@string/app_name">
+<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="com.custom.keyboard">
+    <uses-permission android:name="android.permission.VIBRATE" android:required="false" />
+    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" android:required="false" />
+    <uses-permission android:name="android.permission.FLASHLIGHT" android:required="false" />
+    <uses-permission android:name="android.permission.INTERNET" android:required="false" />
+    <uses-permission android:name="android.permission.READ_USER_DICTIONARY" android:required="false" />
+    <uses-permission android:name="android.permission.WRITE_USER_DICTIONARY" android:required="false" />
+    <application android:allowBackup="false"
+                 android:fullBackupContent="false"
+                 android:icon="@mipmap/ic_launcher"
+                 android:label="@string/app_name"
+                 android:roundIcon="@mipmap/ic_launcher"
+                 android:supportsRtl="true"
+                 android:theme="@style/AppTheme">
+        <activity android:name=".Main" android:label="@string/app_name">
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
                 <category android:name="android.intent.category.LAUNCHER" />
@@ -42,14 +25,12 @@
             </intent-filter>
         </activity>
         <activity android:name=".Completions" />
-        <service
-            android:name=".CustomInputMethodService"
-            android:label="@string/app_name"
-            android:permission="android.permission.BIND_INPUT_METHOD"
-            android:windowSoftInputMode="adjustResize">
-            <meta-data
-                android:name="android.view.im"
-                android:resource="@xml/method" />
+        <service android:name="com.custom.keyboard.CustomInputMethodService"
+                 android:label="@string/app_name"
+                 android:windowSoftInputMode="adjustResize"
+                 android:permission="android.permission.BIND_INPUT_METHOD">
+            <meta-data android:name="android.view.im" 
+                       android:resource="@xml/method" />
             <intent-filter>
                 <action android:name="android.view.InputMethod" />
             </intent-filter>
diff --git a/app/src/main/java/com/custom/keyboard/Bounds.java b/app/src/main/java/com/custom/keyboard/Bounds.java
index 8ac16fd..6fb577e 100644
--- a/app/src/main/java/com/custom/keyboard/Bounds.java
+++ b/app/src/main/java/com/custom/keyboard/Bounds.java
@@ -32,12 +32,6 @@ class Bounds {
 
     @Override
     public String toString() {
-        return    "minX: "+minX
-                +" minY: "+minY
-                +" maxX: "+maxX
-                +" maxY: "+maxY
-                +" dX: "+dX
-                +" dY: "+dY
-                ;
+        return "minX: "+minX+" minY: "+minY+" maxX: "+maxX+" maxY: "+maxY;
     }
 }
\ No newline at end of file
diff --git a/app/src/main/java/com/custom/keyboard/Constants.java b/app/src/main/java/com/custom/keyboard/Constants.java
deleted file mode 100644
index 53725e2..0000000
--- a/app/src/main/java/com/custom/keyboard/Constants.java
+++ /dev/null
@@ -1,18 +0,0 @@
-package com.custom.keyboard;
-
-public interface Constants {
-    public String SPACEBARLABEL = "Spacebar Label";
-    public String SPACEBARTEXT = " ";
-    public String SPACEBARPOPUP = "popup_first";
-    public String SPACEBARICON = "ic_space";
-
-    public String TABKEYLABEL = "Tab Key Label";
-    public String TABKEYTEXT = "\t";
-    public String TABKEYPOPUP = "popup_second";
-    public String TABKEYICON = "ic_tab";
-
-    public String ENTERKEYLABEL = "Enter Key Label";
-    public String ENTERKEYTEXT = "\n";
-    public String ENTERKEYPOPUP = "popup_third";
-    public String ENTERKEYICON = "ic_enter";
-}
diff --git a/app/src/main/java/com/custom/keyboard/CustomEditTextPreference.java b/app/src/main/java/com/custom/keyboard/CustomEditTextPreference.java
deleted file mode 100644
index 0d9b540..0000000
--- a/app/src/main/java/com/custom/keyboard/CustomEditTextPreference.java
+++ /dev/null
@@ -1,80 +0,0 @@
-package com.custom.keyboard;
-
-import android.content.SharedPreferences;
-import android.preference.PreferenceManager;
-import androidx.appcompat.app.AppCompatActivity;
-import android.os.Bundle;
-import android.view.View;
-
-import top.defaults.colorpicker.ColorPickerPopup;
-
-public class CustomEditTextPreference extends AppCompatActivity implements View.OnClickListener {
-
-    SharedPreferences sharedPreferences;
-
-
-    @Override
-    protected void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        setContentView(R.layout.activity_custom_edit_text_preference);
-        findViewById(R.id.editSpaceBar).setOnClickListener(this);
-        findViewById(R.id.editTabKey).setOnClickListener(this);
-        findViewById(R.id.editEnterKey).setOnClickListener(this);
-        findViewById(R.id.editForegroundColor).setOnClickListener(this);
-        findViewById(R.id.editBackgroundColor).setOnClickListener(this);
-    }
-
-    @Override
-    public void onClick(View view) {
-        sharedPreferences = PreferenceManager.getDefaultSharedPreferences(view.getContext());
-
-
-        if (view.getId() == R.id.editSpaceBar) {
-            new EditSpacebarPopup(this, "space").show();
-        }
-        else if (view.getId() == R.id.editTabKey) {
-            new EditSpacebarPopup(this, "tab").show();
-        }
-        else if (view.getId() == R.id.editEnterKey) {
-            new EditSpacebarPopup(this, "enter").show();
-        }
-        else if (view.getId() == R.id.editForegroundColor) {
-            new ColorPickerPopup.Builder(this)
-                .initialColor(sharedPreferences.getInt("fg", -1677216)) // Set initial color
-                .enableBrightness(true) // Enable brightness slider or not
-                // .enableAlpha(true) // Enable alpha slider or not
-                .okTitle("Choose")
-                .cancelTitle("Cancel")
-                .showIndicator(true)
-                .showValue(true)
-                .build()
-                .show(view, new ColorPickerPopup.ColorPickerObserver() {
-                    @Override
-                    public void onColorPicked(int color) {
-                        SharedPreferences.Editor sharedPreferenceEditor = sharedPreferences.edit();
-                        sharedPreferenceEditor.putInt("fg", color);
-                        sharedPreferenceEditor.apply();
-                    }
-                });
-        }
-        else if (view.getId() == R.id.editBackgroundColor) {
-            new ColorPickerPopup.Builder(this)
-                .initialColor(sharedPreferences.getInt("bg", -1)) // Set initial color
-                .enableBrightness(true) // Enable brightness slider or not
-                // .enableAlpha(true) // Enable alpha slider or not
-                .okTitle("Choose")
-                .cancelTitle("Cancel")
-                .showIndicator(true)
-                .showValue(true)
-                .build()
-                .show(view, new ColorPickerPopup.ColorPickerObserver() {
-                    @Override
-                    public void onColorPicked(int color) {
-                        SharedPreferences.Editor sharedPreferenceEditor = sharedPreferences.edit();
-                        sharedPreferenceEditor.putInt("bg", color);
-                        sharedPreferenceEditor.apply();
-                    }
-                });
-        }
-    }
-}
diff --git a/app/src/main/java/com/custom/keyboard/CustomInputMethodService.java b/app/src/main/java/com/custom/keyboard/CustomInputMethodService.java
index 3024bc7..1d8a60d 100644
--- a/app/src/main/java/com/custom/keyboard/CustomInputMethodService.java
+++ b/app/src/main/java/com/custom/keyboard/CustomInputMethodService.java
@@ -2,7 +2,6 @@ package com.custom.keyboard;
 
 import android.annotation.SuppressLint;
 import android.app.Dialog;
-import android.content.BroadcastReceiver;
 import android.content.Context;
 import android.content.Intent;
 import android.content.SharedPreferences;
@@ -37,6 +36,7 @@ import android.widget.Toast;
 import org.apache.commons.lang3.StringUtils;
 
 import java.util.ArrayList;
+import java.util.Arrays;
 import java.util.List;
 import java.util.Locale;
 
@@ -147,17 +147,15 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
         layouts.add(new CustomKeyboard(this, R.layout.primary,     "primary",     "qwerty").setCategory(Category.Main));
         if (sharedPreferences.getBoolean("accents",    t)) {layouts.add(new CustomKeyboard(this, R.layout.accents,     "accents",    "‚óåÃÄ‚óåÃÅ‚óåÃÇ").setCategory(Category.Misc));}
         if (sharedPreferences.getBoolean("emoji",      t)) {layouts.add(new CustomKeyboard(this, R.layout.emoji,       "emoji",      "üòÄüòÅüòÇ").setCategory(Category.Misc));}
-        if (sharedPreferences.getBoolean("fancy",      t)) {layouts.add(new CustomKeyboard(this, R.layout.fancy,       "fancy",      "…ã∆ø“ΩÍùõ√æ“Ø").setCategory(Category.Misc));}
         if (sharedPreferences.getBoolean("fonts",      t)) {layouts.add(new CustomKeyboard(this, R.layout.fonts,       "fonts",      "üÑ∞üÖêüÑêùî∏ùï¨ùíú").setCategory(Category.Font));}
         if (sharedPreferences.getBoolean("function",   t)) {layouts.add(new CustomKeyboard(this, R.layout.function,    "function",   "∆í(x)").setCategory(Category.Util).setOrder(-2));}
         if (sharedPreferences.getBoolean("hex",        t)) {layouts.add(new CustomKeyboard(this, R.layout.hex,         "hex",        "\\uabcd").setCategory(Category.Util));}
-        if (sharedPreferences.getBoolean("ipa",        t)) {layouts.add(new CustomKeyboard(this, R.layout.ipa,         "IPA",        "…ã ç…ô…π à…•").setCategory(Category.Misc));}
         if (sharedPreferences.getBoolean("macros",     t)) {layouts.add(new CustomKeyboard(this, R.layout.macros,      "macros",     "‚úê").setCategory(Category.Util).setOrder(-4));}
         if (sharedPreferences.getBoolean("navigation", t)) {layouts.add(new CustomKeyboard(this, R.layout.navigation,  "navigation", "‚Üí‚Üê‚Üë‚Üì").setCategory(Category.Util).setOrder(-1));}
         if (sharedPreferences.getBoolean("numeric",    t)) {layouts.add(new CustomKeyboard(this, R.layout.numeric,     "numeric",    "123456").setCategory(Category.Util));}
         if (sharedPreferences.getBoolean("symbol",     t)) {layouts.add(new CustomKeyboard(this, R.layout.symbol,      "symbol",     "!@#$%^").setCategory(Category.Misc));}
         if (sharedPreferences.getBoolean("unicode",    t)) {layouts.add(new CustomKeyboard(this, R.layout.unicode,     "unicode",    "\\uxxxx").setCategory(Category.Util));}
-        if (sharedPreferences.getBoolean("url",        t)) {layouts.add(new CustomKeyboard(this, R.layout.url,         "URL",        "@/.com").setCategory(Category.Util));}
+        if (sharedPreferences.getBoolean("url",        t)) {layouts.add(new CustomKeyboard(this, R.layout.url,         "url",        "@/.com").setCategory(Category.Util));}
         if (sharedPreferences.getBoolean("utility",    t)) {layouts.add(new CustomKeyboard(this, R.layout.utility,     "utility",    "/**/").setCategory(Category.Util).setOrder(-3));}
 
         int layoutLayout = R.layout.layouts;
@@ -166,7 +164,7 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
 
         if (getKeyboard("Layouts") != null) {
             for (Keyboard.Key key : getKeyboard("Layouts").getKeys()) {
-                if (key.codes[0] <= layoutMin && key.codes[0] >= layoutMax) {
+                if (key.codes[0] <= layoutMin && key.codes[0] >= -423) {
                     try {
                         CustomKeyboard layout = layouts.get(-key.codes[0] + layoutMin);
                         if (layout != null && !layout.title.equals("Layouts")) {
@@ -206,10 +204,17 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
     }
 
     int layoutMin = -400;
-    int layoutMax = -454;
+    int layoutMax = -423;
 
     public void adjustLayoutPage() {
         if (!sharedPreferences.getBoolean("relayout", t)) {return;}
+        // if (sharedPreferences.getBoolean("relayout", t)) {return;}
+
+        int colCount = 6;
+        int startRowCount = 9;
+        int layoutCount = Math.max(layouts.size()-1, 1);
+        double finalRowCount = Math.ceil((double)layoutCount / (double)colCount);
+
 
         List<Keyboard.Key> layoutKeys = new ArrayList<>();
         for(Keyboard.Key key : getKeyboard("Layouts").getKeys()) {
@@ -219,26 +224,25 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
         }
         Bounds bounds = getBounds(layoutKeys);
 
-        int rowHeight = layoutKeys.get(0).height;
-        int colCount = 6;
-        int startRowCount = 9;
-        int layoutCount = Math.max(layouts.size()-1, 1);
-        double finalRowCount = Math.ceil((double)layoutCount / (double)colCount);
 
-        // 1 row:  double moveBy = 448; //bounds.dY / (finalRowCount); 448 - (56 * 0) / 1
-        // 2 rows: double moveBy = 196; //bounds.dY / (finalRowCount); 448 - (56 * 1) / 2
-        // 3 rows: double moveBy = 112; //bounds.dY / (finalRowCount); 448 - (56 * 2) / 3
-        double moveBy = (bounds.dY - (rowHeight * (finalRowCount - 1))) / finalRowCount;
+        int rowHeight = layoutKeys.get(0).height;
+        int areaHeight = bounds.maxY;
+        int usedHeight = rowHeight * ((int)finalRowCount + 1) - bounds.minY;
+        int freeHeight = areaHeight - usedHeight;
+        int moveBy = (int)Math.ceil(freeHeight / finalRowCount);
 
         int row, index = 0;
+
         for (Keyboard.Key key : getKeyboard("Layouts").getKeys()) {
             if (key.codes[0] <= layoutMin && key.codes[0] >= layoutMax) {
                 row = (index / colCount);
                 if (row >= (startRowCount-(startRowCount-finalRowCount))) {
+                    // hide row
                     key.y = bounds.maxY;
                     key.height = 0;
                 }
                 else {
+                    // increase row size/position
                     key.y += (moveBy * row);
                     key.height += moveBy;
                 }
@@ -483,13 +487,6 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
         return null;
     }
 
-    BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
-        @Override
-        public void onReceive(Context context, Intent intent) {
-            toastIt("updateKeyboard");
-        }
-    };
-
     @SuppressLint("InflateParams")
     @Override
     public void onStartInput(EditorInfo attribute, boolean restarting) {
@@ -870,33 +867,15 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
     public void setTheme() {
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(getBaseContext());
         try {
-            int fg = sharedPreferences.getInt("fg", -1677216);
-            String foreground = Integer.toHexString(fg);
-            String fgA = foreground.substring(0, 2);
-            String fgR = foreground.substring(2, 4);
-            String fgG = foreground.substring(4, 6);
-            String fgB = foreground.substring(6, 8);
-
-            int bg = sharedPreferences.getInt("bg", -1);
-            String background = Integer.toHexString(bg);
-            String bgA = background.substring(0, 2);
-            String bgR = background.substring(2, 4);
-            String bgG = background.substring(4, 6);
-            String bgB = background.substring(6, 8);
-
-            toastIt(
-                    fgA+" "+ fgR+" "+ fgG+" "+ fgB+"\n"+
-                    bgA+" "+ bgR+" "+ bgG+" "+ bgB
-            );
-
-            float[] sCustomColorArray = {
-                1.0f,      0,      0,       0,      Long.parseLong(bgR, 16), // red
-                   0,   1.0f,      0,       0,      Long.parseLong(bgG, 16), // green
-                   0,      0,   1.0f,       0,      Long.parseLong(bgB, 16), // blue
-                   0,      0,      0,    1.0f,      Long.parseLong(bgA, 16)  // alpha
-            };
-
-            mDefaultFilter = sCustomColorArray;
+            String theme = sharedPreferences.getString("theme", "1");
+            if (theme != null) {
+                if (theme.equals("0")) theme = String.valueOf(Util.generateRandomInt(1, 22));
+                switch (theme) {
+                    // case  "1": mDefaultFilter = Themes.sPositiveColorArray;     break;
+                    case  "2": mDefaultFilter = sNegativeColorArray;     break;
+                    default:   mDefaultFilter = sPositiveColorArray;     break;
+                }
+            }
         }
         catch (Exception e) {
             toastIt(e.toString());
@@ -954,12 +933,12 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
     @Override
     public void onRelease(int primaryCode) {
         ic = getCurrentInputConnection();
-        time = (System.nanoTime() - time) / 1000000;
+        time = System.nanoTime() - time;
 
-        if (time > 300) {
+        if ((time/1000000) > 300) {
             switch (primaryCode) {
                 case 31: performContextMenuAction(16908330); break;
-                // case 10: handleEnter(1); break;
+                case 10: handleEnter(1); break;
                 case -11: performContextMenuAction(16908337); break; // pasteAsPlainText
                 case -93: selectAll(); break;
                 case -99: ic.deleteSurroundingText(MAX, MAX); break;
@@ -980,7 +959,7 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
         ic = getCurrentInputConnection();
         final int length = mComposing.length();
 
-        // if (!isSelecting()) selectLine();
+        if (!isSelecting()) selectLine();
 
         try {
             if (sharedPreferences.getBoolean("pairs", t)
@@ -1261,7 +1240,6 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
     }
     
     public void handleSpace() {
-
         if (sharedPreferences.getBoolean("spaces", t)) {
             int spaceCount = (4 - (prevLine().length() % 4));
             if (spaceCount > 0 && spaceCount < 4 && prevLine().length() < 4) {
@@ -1279,8 +1257,8 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
             }
         }
     }
-    public void handleEnter() {
-        // if (noop == 0) return;
+    public void handleEnter(int noop) {
+        if (noop == 0) return;
         EditorInfo curEditor = getCurrentInputEditorInfo();
     
         if (sharedPreferences.getBoolean("spaces", t)) {
@@ -1340,7 +1318,7 @@ public class CustomInputMethodService extends InputMethodService implements Keyb
             case 133: sendKey(KeyEvent.KEYCODE_F3); break;
             case 132: sendKey(KeyEvent.KEYCODE_F2); break;
             case 131: sendKey(KeyEvent.KEYCODE_F1); break;
-            case  10: handleEnter(); break;
+            case  10: handleEnter(0); break;
             case   7: handleSpace(); break;
             case  -1: handleShift(); break;
             case  -2: hide(); break;
diff --git a/app/src/main/java/com/custom/keyboard/CustomKeyboard.java b/app/src/main/java/com/custom/keyboard/CustomKeyboard.java
index fd6e023..0b88ae4 100644
--- a/app/src/main/java/com/custom/keyboard/CustomKeyboard.java
+++ b/app/src/main/java/com/custom/keyboard/CustomKeyboard.java
@@ -20,73 +20,72 @@ public class CustomKeyboard extends Keyboard implements Comparable<CustomKeyboar
 
     CustomKeyboard(Context context, int xmlLayoutResId) {
         super(context, xmlLayoutResId);
-        this.layoutId = xmlLayoutResId;
+        layoutId = xmlLayoutResId;
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
     }
     
     CustomKeyboard(Context context, int xmlLayoutResId, String title) {
         super(context, xmlLayoutResId);
         this.key = Util.toLowerCase(title);
-        this.title = !Util.containsLowerCase(title) ? title : Util.toTitleCase(title);
-        this.label = Util.toTitleCase(title);
-        this.layoutId = xmlLayoutResId;
+        this.title = Util.toTitleCase(title);
+        layoutId = xmlLayoutResId;
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
     }    
     
     CustomKeyboard(Context context, int xmlLayoutResId, String title, String label) {
         super(context, xmlLayoutResId);
         this.key = Util.toLowerCase(title);
-        this.title = !Util.containsLowerCase(title) ? title : Util.toTitleCase(title);
-        this.label = !Util.containsLowerCase(label) ? label : Util.toTitleCase(label);
-        this.layoutId = xmlLayoutResId;
+        this.title = Util.toTitleCase(title);
+        this.label = Util.toTitleCase(label);
+        layoutId = xmlLayoutResId;
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
     }
 
     CustomKeyboard(Context context, int xmlLayoutResId, String title, int order) {
         super(context, xmlLayoutResId);
         this.key = Util.toLowerCase(title);
-        this.title = !Util.containsLowerCase(title) ? title : Util.toTitleCase(title);
-        this.label = !Util.containsLowerCase(label) ? label : Util.toTitleCase(label);
+        this.title = Util.toTitleCase(title);
+        this.label = Util.toTitleCase(title);
         this.order = order;
         if (this.order < 0) {
             this.order = 1024 + this.order;
         }
-        this.layoutId = xmlLayoutResId;
+        layoutId = xmlLayoutResId;
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
     }
 
     CustomKeyboard(Context context, int xmlLayoutResId, String title, String label, int order) {
         super(context, xmlLayoutResId);
         this.key = Util.toLowerCase(title);
-        this.title = !Util.containsLowerCase(title) ? title : Util.toTitleCase(title);
-        this.label = !Util.containsLowerCase(label) ? label : Util.toTitleCase(label);
+        this.title = Util.toTitleCase(title);
+        this.label = Util.toTitleCase(title);
         this.order = order;
         if (this.order < 0) {
             this.order = 1024 + this.order;
         }
-        this.layoutId = xmlLayoutResId;
+        layoutId = xmlLayoutResId;
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
     }
 
     CustomKeyboard(Context context, int xmlLayoutResId, String key, String title, String label) {
         super(context, xmlLayoutResId);
-        this.key = Util.toLowerCase(key);
-        this.title = !Util.containsLowerCase(title) ? title : Util.toTitleCase(title);
-        this.label = !Util.containsLowerCase(label) ? label : Util.toTitleCase(label);
-        this.layoutId = xmlLayoutResId;
+        this.key = Util.toLowerCase(title);
+        this.title = Util.toTitleCase(title);
+        this.label = Util.toTitleCase(title);
+        layoutId = xmlLayoutResId;
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
     }
 
     CustomKeyboard(Context context, int xmlLayoutResId, String key, String title, String label, int order) {
         super(context, xmlLayoutResId);
-        this.key = Util.toLowerCase(key);
-        this.title = !Util.containsLowerCase(title) ? title : Util.toTitleCase(title);
-        this.label = !Util.containsLowerCase(label) ? label : Util.toTitleCase(label);
+        this.key = Util.toLowerCase(title);
+        this.title = Util.toTitleCase(title);
+        this.label = Util.toTitleCase(title);
         this.order = order;
         if (this.order < 0) {
             this.order = 1024 + this.order;
         }
-        this.layoutId = xmlLayoutResId;
+        layoutId = xmlLayoutResId;
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);
     }
 
@@ -102,6 +101,7 @@ public class CustomKeyboard extends Keyboard implements Comparable<CustomKeyboar
     }
 
     public int getOrder() {
+
         return order;
     }
 
@@ -111,6 +111,7 @@ public class CustomKeyboard extends Keyboard implements Comparable<CustomKeyboar
     }
 
     public Category getCategory() {
+
         return category;
     }
 
@@ -120,15 +121,18 @@ public class CustomKeyboard extends Keyboard implements Comparable<CustomKeyboar
     }
 
     void setRowNumber(short number) {
+
         rowNumber = number;
     }
 
     @Override
     public int getHeight() {
+
         return getKeyHeight() * rowNumber;
     }
     
     public void setKeyHeight(int height) {
+
         super.setKeyHeight(height);
     }
 
diff --git a/app/src/main/java/com/custom/keyboard/CustomKeyboardView.java b/app/src/main/java/com/custom/keyboard/CustomKeyboardView.java
index 19e1a07..c5aeb94 100644
--- a/app/src/main/java/com/custom/keyboard/CustomKeyboardView.java
+++ b/app/src/main/java/com/custom/keyboard/CustomKeyboardView.java
@@ -6,10 +6,10 @@ import android.graphics.Canvas;
 import android.graphics.Color;
 import android.graphics.Paint;
 import android.graphics.drawable.Drawable;
+import android.inputmethodservice.Keyboard;
 import android.inputmethodservice.Keyboard.Key;
 import android.inputmethodservice.KeyboardView;
 import android.preference.PreferenceManager;
-import androidx.core.content.ContextCompat;
 import android.util.AttributeSet;
 
 import java.util.List;
@@ -46,9 +46,6 @@ public class CustomKeyboardView extends KeyboardView {
             return true;
         }
         */
-        if (key.codes[0] == 32) {
-
-        }
         if (key.codes[0] == -192
         ||  key.codes[0] == -300
         ||  key.codes[0] ==   10) {
@@ -141,18 +138,11 @@ public class CustomKeyboardView extends KeyboardView {
         kcontext = getContext();
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(kcontext);
 
-        int fg = sharedPreferences.getInt("fg", -1677216);
-        int bg = sharedPreferences.getInt("bg", -1);
-        String foreground = "#"+Integer.toHexString(fg);
-        String background = "#"+Integer.toHexString(bg);
-
-
         boolean borders = sharedPreferences.getBoolean("borders", false);
         boolean padding = sharedPreferences.getBoolean("padding", false);
         boolean corners = sharedPreferences.getBoolean("corners", false);
         boolean keyback = sharedPreferences.getBoolean("keyback", false);
-        String iconId;
-        int imageId;
+
 
         List<Key> keys = getKeyboard().getKeys();
         for (Key key : keys) {
@@ -162,7 +152,7 @@ public class CustomKeyboardView extends KeyboardView {
                 canvas.save();
                 canvas.clipRect(key.x, key.y, key.x+key.width, key.y+key.height);
                 canvas.clipOutRect(key.x+border, key.y+border, key.x+key.width-border, key.y+key.height-border);
-                mPaint.setColor(Color.parseColor(foreground));
+                mPaint.setColor(Color.parseColor("#ffffffff"));
                 canvas.drawRect(key.x, key.y, key.x+key.width, key.y+key.height, mPaint);
                 canvas.restore();
             }
@@ -172,7 +162,7 @@ public class CustomKeyboardView extends KeyboardView {
                 canvas.save();
                 canvas.clipRect(key.x+(border*2), key.y+(border*2), key.x+key.width-(border*2), key.y+key.height-(border*2));
                 canvas.clipOutRect(key.x+(border*4), key.y+(border*4), key.x+key.width-(border*4), key.y+key.height-(border*4));
-                mPaint.setColor(Color.parseColor(foreground));
+                mPaint.setColor(Color.parseColor("#ffffffff"));
                 canvas.drawRect(key.x+(border*2), key.y+(border*2), key.x+key.width-(border*2), key.y+key.height-(border*2), mPaint);
                 canvas.restore();
             }
@@ -182,9 +172,9 @@ public class CustomKeyboardView extends KeyboardView {
                 canvas.save();
                 canvas.clipRect(key.x, key.y, key.x+key.width, key.y+key.height);
                 canvas.clipOutRect(key.x+(border*4)+corner, key.y+(border*4)+corner, key.x+key.width-(border*4)-corner, key.y+key.height-(border*4)-corner);
-                mPaint.setColor(Color.parseColor(foreground));
+                mPaint.setColor(Color.parseColor("#ffffffff"));
                 canvas.drawRoundRect(key.x+(border*2), key.y+(border*2), key.x+key.width-(border*2), key.y+key.height-(border*2), corner, corner, mPaint);
-                mPaint.setColor(Color.parseColor(background));
+                mPaint.setColor(Color.parseColor("#ff000000"));
                 canvas.drawRoundRect(key.x+(border*4), key.y+(border*4), key.x+key.width-(border*4), key.y+key.height-(border*4), corner, corner, mPaint);
                 canvas.restore();
             }
@@ -208,60 +198,6 @@ public class CustomKeyboardView extends KeyboardView {
                 }
             }
 
-            if (key.codes[0] == 32) {
-                key.text = sharedPreferences.getString(Constants.SPACEBARTEXT, " ");
-                key.popupCharacters = sharedPreferences.getString(Constants.SPACEBARPOPUP, getContext().getString(R.string.popup_first));
-
-                iconId = sharedPreferences.getString(Constants.SPACEBARICON, "ic_space");
-                if (!iconId.isEmpty()) {
-                    imageId = getResources().getIdentifier(iconId, "drawable", getContext().getPackageName());
-                    key.icon = ContextCompat.getDrawable(getContext(), imageId);
-                }
-                else {
-                    key.label = sharedPreferences.getString(Constants.SPACEBARLABEL, ""); //  getContext().getString(R.string.popup_first)
-                }
-            }
-            if (key.codes[0] == 7) {
-                key.text = sharedPreferences.getString(Constants.TABKEYTEXT, "\t");
-                key.popupCharacters = sharedPreferences.getString(Constants.TABKEYPOPUP, getContext().getString(R.string.popup_second));
-
-                iconId = sharedPreferences.getString(Constants.TABKEYICON, "ic_tab");
-                if (!iconId.isEmpty()) {
-                    imageId = getResources().getIdentifier(iconId, "drawable", getContext().getPackageName());
-                    key.icon = ContextCompat.getDrawable(getContext(), imageId);
-                }
-                else {
-                    key.label = sharedPreferences.getString(Constants.TABKEYLABEL, ""); // getContext().getString(R.string.popup_second)
-                }
-            }
-            if (key.codes[0] == 10) {
-                key.text = sharedPreferences.getString(Constants.ENTERKEYTEXT, "\n");
-                key.popupCharacters = sharedPreferences.getString(Constants.ENTERKEYPOPUP, getContext().getString(R.string.popup_third));
-
-                iconId = sharedPreferences.getString(Constants.ENTERKEYICON, "ic_enter");
-                if (!iconId.isEmpty()) {
-                    imageId = getResources().getIdentifier(iconId, "drawable", getContext().getPackageName());
-                    key.icon = ContextCompat.getDrawable(getContext(), imageId);
-                }
-                else {
-                    key.label = sharedPreferences.getString(Constants.ENTERKEYLABEL, ""); // getContext().getString(R.string.popup_third)
-                }
-            }
-
-            if (key.codes[0] == -501)   key.text = sharedPreferences.getString("k1", "");
-            if (key.codes[0] == -502)   key.text = sharedPreferences.getString("k2", "");
-            if (key.codes[0] == -503)   key.text = sharedPreferences.getString("k3", "");
-            if (key.codes[0] == -504)   key.text = sharedPreferences.getString("k4", "");
-            if (key.codes[0] == -505)   key.text = sharedPreferences.getString("k5", "");
-            if (key.codes[0] == -506)   key.text = sharedPreferences.getString("k6", "");
-            if (key.codes[0] == -507)   key.text = sharedPreferences.getString("k7", "");
-            if (key.codes[0] == -508)   key.text = sharedPreferences.getString("k8", "");
-            if (key.codes[0] == -509)   key.text = sharedPreferences.getString("name", "");
-            if (key.codes[0] == -510)   key.text = sharedPreferences.getString("email", "");
-            if (key.codes[0] == -511)   key.text = sharedPreferences.getString("phone", "");
-            if (key.codes[0] == -512)   key.text = sharedPreferences.getString("address", "");
-
-
             if (key.codes[0] == -12) {if (Variables.isBold())      {selectKey(key, corner);}}
             if (key.codes[0] == -13) {if (Variables.isItalic())    {selectKey(key, corner);}}
             if (key.codes[0] == -76) {if (Variables.isSelect())    {selectKey(key, corner);}}
@@ -273,7 +209,6 @@ public class CustomKeyboardView extends KeyboardView {
             && key.codes[0] !=  7
             && key.codes[0] != 10
             && key.codes[0] != 32
-            && !(key.codes[0] <= -500 && key.codes[0] >= -512)
             && sharedPreferences.getBoolean("hints", true)
             ) {
                 canvas.save();
@@ -287,7 +222,7 @@ public class CustomKeyboardView extends KeyboardView {
                 &&  !sharedPreferences.getBoolean("hint4", false)
                 ) {
                     mPaint.setTextSize(32);
-                    mPaint.setColor(Color.parseColor(foreground));
+                    mPaint.setColor(Color.parseColor("#ddffffff"));
                     canvas.drawText(((getKeyboard().isShifted())
                         ? String.valueOf(key.popupCharacters.charAt(0)).toUpperCase()
                         : String.valueOf(key.popupCharacters.charAt(0)).toLowerCase()), key.x+(key.width/2), key.y+36, mPaint);
@@ -295,7 +230,7 @@ public class CustomKeyboardView extends KeyboardView {
 
                 else {
                     mPaint.setTextSize(28);
-                    mPaint.setColor(Color.parseColor(foreground));
+                    mPaint.setColor(Color.parseColor("#bbffffff"));
                     if (key.popupCharacters.length() > 0 && sharedPreferences.getBoolean("hint1", false)) {
                         canvas.drawText(((getKeyboard().isShifted())
                              ? String.valueOf(key.popupCharacters.charAt(0)).toUpperCase()
diff --git a/app/src/main/java/com/custom/keyboard/EditSpacebarPopup.java b/app/src/main/java/com/custom/keyboard/EditSpacebarPopup.java
deleted file mode 100644
index 668c60a..0000000
--- a/app/src/main/java/com/custom/keyboard/EditSpacebarPopup.java
+++ /dev/null
@@ -1,106 +0,0 @@
-package com.custom.keyboard;
-
-import android.app.Dialog;
-import android.content.Context;
-import android.content.SharedPreferences;
-import android.os.Bundle;
-import android.preference.PreferenceManager;
-import android.view.Gravity;
-import android.view.LayoutInflater;
-import android.view.View;
-import android.view.ViewGroup;
-import android.view.Window;
-import android.widget.EditText;
-import android.widget.Toast;
-
-public class EditSpacebarPopup extends Dialog {
-
-    SharedPreferences sharedPreferences;
-    LayoutInflater layoutInflater;
-    String type;
-    EditText labelTextView;
-    EditText textTextView;
-    EditText popupTextView;
-    EditText iconTextView;
-
-    public EditSpacebarPopup(Context context, String type) {
-        super(context);
-        this.type = type;
-        layoutInflater = LayoutInflater.from(context);
-    }
-
-    public void setValues(String type) {
-        // @TODO: this isn't working to set the default values
-        if (type.equals("space")) {
-            labelTextView.setText(sharedPreferences.getString(Constants.SPACEBARLABEL, ""));
-            textTextView.setText(sharedPreferences.getString(Constants.SPACEBARTEXT, " "));
-            popupTextView.setText(sharedPreferences.getString(Constants.SPACEBARPOPUP, getContext().getString(R.string.popup_first)));
-            iconTextView.setText(sharedPreferences.getString(Constants.SPACEBARICON, "ic_space"));
-        }
-        if (type.equals("tab")) {
-            labelTextView.setText(sharedPreferences.getString(Constants.TABKEYLABEL, ""));
-            textTextView.setText(sharedPreferences.getString(Constants.TABKEYTEXT, ""));
-            popupTextView.setText(sharedPreferences.getString(Constants.TABKEYPOPUP, getContext().getString(R.string.popup_second)));
-            iconTextView.setText(sharedPreferences.getString(Constants.TABKEYICON, "ic_tab"));
-        }
-        if (type.equals("enter")) {
-            labelTextView.setText(sharedPreferences.getString(Constants.ENTERKEYLABEL, ""));
-            textTextView.setText(sharedPreferences.getString(Constants.ENTERKEYTEXT, ""));
-            popupTextView.setText(sharedPreferences.getString(Constants.ENTERKEYPOPUP, getContext().getString(R.string.popup_third)));
-            iconTextView.setText(sharedPreferences.getString(Constants.ENTERKEYICON, "ic_enter"));
-        }
-    }
-
-    @Override
-    protected void onCreate(Bundle savedInstanceState) {
-        super.onCreate(savedInstanceState);
-        requestWindowFeature(Window.FEATURE_NO_TITLE);
-        View view = layoutInflater.inflate(R.layout.edit_key_popup, null, false);
-        setContentView(view);
-        getWindow().setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
-        getWindow().setBackgroundDrawableResource(R.color.transparent);
-        getWindow().setGravity(Gravity.CENTER);
-        setCancelable(true);
-
-        sharedPreferences = PreferenceManager.getDefaultSharedPreferences(view.getContext());
-        SharedPreferences.Editor sharedPreferenceEditor = sharedPreferences.edit();
-
-        labelTextView = findViewById(R.id.editLabel);
-        textTextView = findViewById(R.id.editText);
-        popupTextView = findViewById(R.id.editPopup);
-        iconTextView = findViewById(R.id.editIcon);
-
-        findViewById(R.id.savePopup).setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View view) {
-                if (type.equals("space")) {
-                    sharedPreferenceEditor.putString(Constants.SPACEBARLABEL, labelTextView.getText().toString());
-                    sharedPreferenceEditor.putString(Constants.SPACEBARTEXT,  textTextView.getText().toString());
-                    sharedPreferenceEditor.putString(Constants.SPACEBARPOPUP, popupTextView.getText().toString());
-                    sharedPreferenceEditor.putString(Constants.SPACEBARICON,  iconTextView.getText().toString());
-                }
-                if (type.equals("tab")) {
-                    sharedPreferenceEditor.putString(Constants.TABKEYLABEL, labelTextView.getText().toString());
-                    sharedPreferenceEditor.putString(Constants.TABKEYTEXT,  textTextView.getText().toString());
-                    sharedPreferenceEditor.putString(Constants.TABKEYPOPUP, popupTextView.getText().toString());
-                    sharedPreferenceEditor.putString(Constants.TABKEYICON,  iconTextView.getText().toString());
-                }
-                if (type.equals("enter")) {
-                    sharedPreferenceEditor.putString(Constants.ENTERKEYLABEL, labelTextView.getText().toString());
-                    sharedPreferenceEditor.putString(Constants.ENTERKEYTEXT,  textTextView.getText().toString());
-                    sharedPreferenceEditor.putString(Constants.ENTERKEYPOPUP, popupTextView.getText().toString());
-                    sharedPreferenceEditor.putString(Constants.ENTERKEYICON,  iconTextView.getText().toString());
-                }
-                sharedPreferenceEditor.apply();
-                Toast.makeText(view.getContext(), "Values Saved", Toast.LENGTH_SHORT).show();
-                dismiss();
-            }
-        });
-        findViewById(R.id.exitPopup).setOnClickListener(new View.OnClickListener() {
-            @Override
-            public void onClick(View view) {
-                dismiss();
-            }
-        });
-    }
-}
diff --git a/app/src/main/java/com/custom/keyboard/Main.java b/app/src/main/java/com/custom/keyboard/Main.java
index 5b058b8..b76b612 100644
--- a/app/src/main/java/com/custom/keyboard/Main.java
+++ b/app/src/main/java/com/custom/keyboard/Main.java
@@ -4,7 +4,7 @@ import android.content.Context;
 import android.content.Intent;
 import android.os.Bundle;
 import android.provider.Settings;
-import androidx.appcompat.app.AppCompatActivity;
+import android.support.v7.app.AppCompatActivity;
 import android.view.View;
 import android.view.inputmethod.InputMethodManager;
 
@@ -25,7 +25,7 @@ public class Main extends AppCompatActivity {
     }
 
     public void enable(View v) {
-        startActivity(new Intent(Settings.ACTION_INPUT_METHOD_SETTINGS));
+        this.startActivity(new Intent(Settings.ACTION_INPUT_METHOD_SETTINGS));
     }
 
     public void select(View v) {
@@ -34,9 +34,4 @@ public class Main extends AppCompatActivity {
             imeManager.showInputMethodPicker();
         }
     }
-
-    public void popup(View v) {
-        Intent intent = new Intent(this, CustomEditTextPreference.class);
-        startActivity(intent);
-    }
 }
diff --git a/app/src/main/java/com/custom/keyboard/Preference.java b/app/src/main/java/com/custom/keyboard/Preference.java
index 5a8ba59..1bdde26 100644
--- a/app/src/main/java/com/custom/keyboard/Preference.java
+++ b/app/src/main/java/com/custom/keyboard/Preference.java
@@ -1,7 +1,7 @@
 package com.custom.keyboard;
 
 import android.os.Bundle;
-import androidx.appcompat.app.AppCompatActivity;
+import android.support.v7.app.AppCompatActivity;
 
 public class Preference extends AppCompatActivity {
     @Override
diff --git a/app/src/main/java/com/custom/keyboard/PreferenceFragment.java b/app/src/main/java/com/custom/keyboard/PreferenceFragment.java
index 4e802f2..d174621 100644
--- a/app/src/main/java/com/custom/keyboard/PreferenceFragment.java
+++ b/app/src/main/java/com/custom/keyboard/PreferenceFragment.java
@@ -1,15 +1,11 @@
 package com.custom.keyboard;
 
-import android.content.BroadcastReceiver;
 import android.content.Context;
-import android.content.DialogInterface;
-import android.content.Intent;
 import android.content.SharedPreferences;
 import android.os.Bundle;
 import android.preference.CheckBoxPreference;
 import android.preference.EditTextPreference;
 import android.preference.ListPreference;
-import android.preference.Preference;
 import android.preference.PreferenceCategory;
 import android.preference.PreferenceManager;
 import android.preference.PreferenceScreen;
@@ -51,11 +47,21 @@ public class PreferenceFragment extends android.preference.PreferenceFragment im
         baseContext = getActivity().getBaseContext();
         sharedPreferences = PreferenceManager.getDefaultSharedPreferences(baseContext);
 
-        addPreferencesFromResource(R.xml.preferences);
-        PreferenceManager.setDefaultValues(baseContext, R.xml.preferences, true);
-
-        listTheme = (ListPreference)findPreference("theme");
-        listTheme.setSummary(listTheme.getEntry());
+        try {
+            addPreferencesFromResource(R.xml.preferences);
+            PreferenceManager.setDefaultValues(baseContext, R.xml.preferences, true);
+        }
+        catch (Exception ignored) {}
+        try {
+            listDefaultLayout = (ListPreference)findPreference("default_layout");
+            listDefaultLayout.setSummary(listDefaultLayout.getEntry());
+        }
+        catch (Exception ignored) {}
+        try {
+            listTheme = (ListPreference)findPreference("theme");
+            listTheme.setSummary(listTheme.getEntry());
+        }
+        catch (Exception ignored) {}
 
         bg = (EditTextPreference)findPreference("bg");
         fg = (EditTextPreference)findPreference("fg");
@@ -66,35 +72,6 @@ public class PreferenceFragment extends android.preference.PreferenceFragment im
         popup_second = (EditTextPreference)findPreference("popup_second");
         popup_third = (EditTextPreference)findPreference("popup_third");
 
-        popup_first.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {
-            @Override
-            public boolean onPreferenceClick(Preference preference) {
-                EditSpacebarPopup popup = new EditSpacebarPopup(getContext(),"space");
-                popup.show();
-                popup.setOnDismissListener(new DialogInterface.OnDismissListener() {
-                    @Override
-                    public void onDismiss(DialogInterface dialog) {
-                        popup_first.getDialog().dismiss();
-                    }
-                });
-                return false;
-            }
-        });
-
-        popup_second.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {
-            @Override
-            public boolean onPreferenceClick(Preference preference) {
-                EditSpacebarPopup popup = new EditSpacebarPopup(getContext(),"tab");
-                popup.show();
-                popup.setOnDismissListener(new DialogInterface.OnDismissListener() {
-                    @Override
-                    public void onDismiss(DialogInterface dialog) {
-                        popup_second.getDialog().dismiss();
-                    }
-                });
-                return false;
-            }
-        });
         k1 = (EditTextPreference)findPreference("k1");
         k2 = (EditTextPreference)findPreference("k2");
         k3 = (EditTextPreference)findPreference("k3");
@@ -104,34 +81,55 @@ public class PreferenceFragment extends android.preference.PreferenceFragment im
         k7 = (EditTextPreference)findPreference("k7");
         k8 = (EditTextPreference)findPreference("k8");
 
-        name = (EditTextPreference)findPreference("name");
-        name.setSummary(sharedPreferences.getString("name", ""));
-        email = (EditTextPreference)findPreference("email");
-        email.setSummary(sharedPreferences.getString("email", ""));
-        phone = (EditTextPreference)findPreference("phone");
-        phone.setSummary(sharedPreferences.getString("phone", ""));
-        address = (EditTextPreference)findPreference("address");
-        address.setSummary(sharedPreferences.getString("address", ""));
-
-        popup_first.setSummary(sharedPreferences.getString("popup_first", ""));
-        popup_second.setSummary(sharedPreferences.getString("popup_second", ""));
-        popup_third.setSummary(sharedPreferences.getString("popup_third", ""));
-        k1.setSummary(sharedPreferences.getString("k1", ""));
-        k2.setSummary(sharedPreferences.getString("k2", ""));
-        k3.setSummary(sharedPreferences.getString("k3", ""));
-        k4.setSummary(sharedPreferences.getString("k4", ""));
-        k5.setSummary(sharedPreferences.getString("k5", ""));
-        k6.setSummary(sharedPreferences.getString("k6", ""));
-        k7.setSummary(sharedPreferences.getString("k7", ""));
-        k8.setSummary(sharedPreferences.getString("k8", ""));
+        try {
+            name = (EditTextPreference)findPreference("name");
+            name.setSummary(sharedPreferences.getString("name", ""));
+            email = (EditTextPreference)findPreference("email");
+            email.setSummary(sharedPreferences.getString("email", ""));
+            phone = (EditTextPreference)findPreference("phone");
+            phone.setSummary(sharedPreferences.getString("phone", ""));
+            address = (EditTextPreference)findPreference("address");
+            address.setSummary(sharedPreferences.getString("address", ""));
+        }
+        catch (Exception e) {
+            // e.printStackTrace();
+        }
+
+        try {
+            bg.setSummary(sharedPreferences.getString("bg", ""));
+            fg.setSummary(sharedPreferences.getString("fg", ""));
+        }
+        catch (Exception ignored) {}
+        try {
+            text_size.setSummary(sharedPreferences.getString("text_size", ""));
+            seps.setSummary(sharedPreferences.getString("seps", ""));
+            popup_first.setSummary(sharedPreferences.getString("popup_first", ""));
+            popup_second.setSummary(sharedPreferences.getString("popup_second", ""));
+            popup_third.setSummary(sharedPreferences.getString("popup_third", ""));
+        }
+        catch (Exception ignored) {}
+        try {
+            k1.setSummary(sharedPreferences.getString("k1", ""));
+            k2.setSummary(sharedPreferences.getString("k2", ""));
+            k3.setSummary(sharedPreferences.getString("k3", ""));
+            k4.setSummary(sharedPreferences.getString("k4", ""));
+            k5.setSummary(sharedPreferences.getString("k5", ""));
+            k6.setSummary(sharedPreferences.getString("k6", ""));
+            k7.setSummary(sharedPreferences.getString("k7", ""));
+            k8.setSummary(sharedPreferences.getString("k8", ""));
+        }
+        catch (Exception ignored) {}
 
         PreferenceScreen preferences = (PreferenceScreen)findPreference("layouts");
         if (sharedPreferences.getBoolean("custom_order", false)) {
             for(int i = 0; i < CustomInputMethodService.layouts.size(); i++) {
                 CustomKeyboard kv = CustomInputMethodService.layouts.get(i);
                 CheckBoxPreference preference;
-                preference = (CheckBoxPreference)(preferences.findPreference(kv.key));
-                preference.setOrder(preferences.getPreferenceCount()-kv.order);
+                try {
+                    preference = (CheckBoxPreference)(preferences.findPreference(kv.key));
+                    preference.setOrder(preferences.getPreferenceCount()-kv.order);
+                }
+                catch (Exception ignored) {}
             }
         }
         sharedPreferences.registerOnSharedPreferenceChangeListener(this);
@@ -145,36 +143,59 @@ public class PreferenceFragment extends android.preference.PreferenceFragment im
 
         if (s.equals("all")) {
             boolean isChecked = ((CheckBoxPreference)findPreference("all")).isChecked();
-            ((CheckBoxPreference)findPreference("primary")).setChecked(isChecked);
+            try {((CheckBoxPreference)findPreference("primary")).setChecked(isChecked);}
+            catch (Exception ignored) {}
         }
 
         if (s.equals("primary")) {
             PreferenceCategory preferences = (PreferenceCategory)findPreference("primary_category");
             boolean isChecked = ((CheckBoxPreference)findPreference("primary")).isChecked();
             for(int i = 0; i < preferences.getPreferenceCount(); i++) {
-                preference = (CheckBoxPreference)(preferences.getPreference(i));
-                preference.setChecked(isChecked);
+                try {
+                    preference = (CheckBoxPreference)(preferences.getPreference(i));
+                    preference.setChecked(isChecked);
+                }
+                catch (Exception ignored) {}
             }
         }
 
-        popup_first.setSummary(sharedPreferences.getString("popup_first", ""));
-        popup_second.setSummary(sharedPreferences.getString("popup_second", ""));
-        popup_third.setSummary(sharedPreferences.getString("popup_third", ""));
-        name.setSummary(sharedPreferences.getString("name", ""));
-        email.setSummary(sharedPreferences.getString("email", ""));
-        phone.setSummary(sharedPreferences.getString("phone", ""));
-        address.setSummary(sharedPreferences.getString("address", ""));
-        k1.setSummary(sharedPreferences.getString("k1", ""));
-        k2.setSummary(sharedPreferences.getString("k2", ""));
-        k3.setSummary(sharedPreferences.getString("k3", ""));
-        k4.setSummary(sharedPreferences.getString("k4", ""));
-        k5.setSummary(sharedPreferences.getString("k5", ""));
-        k6.setSummary(sharedPreferences.getString("k6", ""));
-        k7.setSummary(sharedPreferences.getString("k7", ""));
-        k8.setSummary(sharedPreferences.getString("k8", ""));
-
-        Intent intent = new Intent("updateKeyboard");
-        getContext().sendBroadcast(intent);
-
+        try {
+            listDefaultLayout = (ListPreference)findPreference("default_layout");
+            listDefaultLayout.setSummary(listDefaultLayout.getEntry());
+        }
+        catch (Exception ignored) {}
+        try {
+            bg.setSummary(sharedPreferences.getString("bg", ""));
+            fg.setSummary(sharedPreferences.getString("fg", ""));
+        }
+        catch (Exception ignored) {}
+        try {
+            listTheme = (ListPreference)findPreference("theme");
+            listTheme.setSummary(listTheme.getEntry());
+        }
+        catch (Exception ignored) {}
+        try {
+            text_size.setSummary(sharedPreferences.getString("text_size", ""));
+            seps.setSummary(sharedPreferences.getString("seps", ""));
+            popup_first.setSummary(sharedPreferences.getString("popup_first", ""));
+            popup_second.setSummary(sharedPreferences.getString("popup_second", ""));
+            popup_third.setSummary(sharedPreferences.getString("popup_third", ""));
+            name.setSummary(sharedPreferences.getString("title", ""));
+            email.setSummary(sharedPreferences.getString("email", ""));
+            phone.setSummary(sharedPreferences.getString("phone", ""));
+            address.setSummary(sharedPreferences.getString("address", ""));
+        }
+        catch (Exception ignored) {}
+        try {
+            k1.setSummary(sharedPreferences.getString("k1", ""));
+            k2.setSummary(sharedPreferences.getString("k2", ""));
+            k3.setSummary(sharedPreferences.getString("k3", ""));
+            k4.setSummary(sharedPreferences.getString("k4", ""));
+            k5.setSummary(sharedPreferences.getString("k5", ""));
+            k6.setSummary(sharedPreferences.getString("k6", ""));
+            k7.setSummary(sharedPreferences.getString("k7", ""));
+            k8.setSummary(sharedPreferences.getString("k8", ""));
+        }
+        catch (Exception ignored) {}
     }
 }
diff --git a/app/src/main/res/layout/accents.xml b/app/src/main/res/layout/accents.xml
index f0c0296..eaf4caa 100644
--- a/app/src/main/res/layout/accents.xml
+++ b/app/src/main/res/layout/accents.xml
@@ -63,11 +63,11 @@
         <Key android:codes="-7"   android:keyIcon="@drawable/ic_delete"    android:isRepeatable="true" />
     </Row>
     <Row>
-        <Key android:codes="-192" android:keyIcon="@drawable/ic_cmd"   android:keyWidth="14%p" />
-        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice" android:keyWidth="8%p" />
-        <Key android:codes="-4"   android:keyIcon="@drawable/ic_grid"  android:keyWidth="8%p" />
-        <Key android:codes="32"   android:keyIcon="@drawable/ic_space" android:keyWidth="40%p" android:popupCharacters="@string/popup_first" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="7"    android:keyIcon="@drawable/ic_tab"   android:keyWidth="10%p" android:popupCharacters="@string/popup_second" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="10"   android:keyIcon="@drawable/ic_enter" android:keyWidth="20%p" android:popupCharacters="@string/popup_third" android:popupKeyboard="@layout/popup_template" />
+                <Key android:codes="-192" android:keyIcon="@drawable/ic_cmd"                    android:keyWidth="14%p" />
+                <Key android:codes="-149" android:keyIcon="@drawable/ic_voice"                  android:keyWidth="8%p" />
+                <Key android:codes="-4"   android:keyIcon="@drawable/ic_grid"                   android:keyWidth="8%p" />
+        <Key android:codes="32"   android:keyIcon="@drawable/ic_space"              android:keyWidth="40%p" android:popupCharacters="@string/popup_first" android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="7"    android:keyIcon="@drawable/ic_tab"                android:keyWidth="10%p" android:popupCharacters="@string/popup_second" android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="10"   android:keyIcon="@drawable/ic_enter"              android:keyWidth="20%p" android:popupCharacters="@string/popup_third" android:popupKeyboard="@layout/popup_template" />
     </Row>
 </Keyboard>
diff --git a/app/src/main/res/layout/activate.xml b/app/src/main/res/layout/activate.xml
index 8f5289a..b7c2298 100644
--- a/app/src/main/res/layout/activate.xml
+++ b/app/src/main/res/layout/activate.xml
@@ -33,16 +33,6 @@
             android:layout_height="50dp"
             android:text="@string/settings"
             />
-    <Button android:layout_marginLeft="10dp"
-            android:layout_marginRight="10dp"
-            android:layout_marginBottom="5dp"
-            android:layout_marginTop="10dp"
-            android:layout_width="match_parent"
-            android:layout_height="50dp"
-            android:id="@+id/popup"
-            android:text="Popup"
-            android:onClick="popup"
-            />
     <EditText android:id="@+id/editText"
               android:layout_marginLeft="10dp"
               android:layout_marginRight="10dp"
diff --git a/app/src/main/res/layout/activity_custom_edit_text_preference.xml b/app/src/main/res/layout/activity_custom_edit_text_preference.xml
deleted file mode 100644
index da6e418..0000000
--- a/app/src/main/res/layout/activity_custom_edit_text_preference.xml
+++ /dev/null
@@ -1,51 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-    xmlns:tools="http://schemas.android.com/tools"
-    xmlns:app="http://schemas.android.com/apk/res-auto"
-    android:orientation="vertical"
-    android:layout_width="match_parent"
-    android:layout_height="wrap_content"
-    android:layout_margin="20dp"
-    android:background="@color/white"
-    android:padding="10dp"
-    android:layout_gravity="center"
-    tools:context=".CustomEditTextPreference">
-    <TextView
-        android:id="@+id/editSpaceBar"
-        android:text="@string/edit_space_bar"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_margin="10dp"
-        android:layout_gravity="center"
-        />
-    <TextView
-        android:id="@+id/editTabKey"
-        android:text="@string/edit_tab_key"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_margin="10dp"
-        android:layout_gravity="center"
-        />
-    <TextView
-        android:id="@+id/editEnterKey"
-        android:text="@string/edit_enter_key"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_margin="10dp"
-        android:layout_gravity="center"
-        />
-    <Button
-        android:id="@+id/editForegroundColor"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_gravity="center"
-        android:text="@string/foreground_color"
-        />
-    <Button
-        android:id="@+id/editBackgroundColor"
-        android:layout_width="wrap_content"
-        android:layout_height="wrap_content"
-        android:layout_gravity="center"
-        android:text="@string/background_color"
-        />
-</LinearLayout>
\ No newline at end of file
diff --git a/app/src/main/res/layout/ctrl.xml b/app/src/main/res/layout/ctrl.xml
index 578d37c..fd9654b 100644
--- a/app/src/main/res/layout/ctrl.xml
+++ b/app/src/main/res/layout/ctrl.xml
@@ -49,6 +49,7 @@
         <Key android:codes="-0012" android:keyLabel="ùóîùóÆ" />
         <Key android:codes="-0013" android:keyLabel="ùòàùò¢" />
         <Key android:codes="-0014" android:keyIcon="@drawable/ic_format_eraser" />
+        <Key android:codes="-0197" android:keyIcon="@drawable/ic_find" />
     </Row>
     <Row>
         <Key android:codes="-0001" android:keyIcon="@drawable/ic_shift" />
@@ -72,9 +73,6 @@
     </Row>
 </Keyboard>
 
-
-
-<!-- <Key android:codes="-0197" android:keyIcon="@drawable/ic_find" /> -->
 <!-- <Key android:codes="-0061" android:keyIcon="@drawable/ic_format_indent" /> -->
 <!-- <Key android:codes="-0062" android:keyIcon="@drawable/ic_format_unindent" /> -->
 <!-- <Key android:codes="-0100" android:keyLabel="nbsp" /> -->
diff --git a/app/src/main/res/layout/edit_key_popup.xml b/app/src/main/res/layout/edit_key_popup.xml
deleted file mode 100644
index 2416644..0000000
--- a/app/src/main/res/layout/edit_key_popup.xml
+++ /dev/null
@@ -1,59 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<LinearLayout
-    xmlns:android="http://schemas.android.com/apk/res/android"
-    android:orientation="vertical"
-    android:layout_gravity="center"
-    android:layout_width="match_parent"
-    android:layout_height="wrap_content">
-    <LinearLayout
-        android:layout_width="match_parent"
-        android:layout_height="wrap_content"
-        android:layout_margin="20dp"
-        android:background="@color/white"
-        android:padding="10dp"
-        android:orientation="vertical">
-        <TextView
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content"
-            android:gravity="center"
-            android:textColor="@android:color/black"
-            android:textSize="18sp"
-            android:text="@string/edit_key" />
-        <EditText
-            android:id="@+id/editLabel"
-            android:hint="@string/what_the_key_shows"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content" />
-        <EditText
-            android:id="@+id/editText"
-            android:hint="@string/what_the_key_sends"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content" />
-        <EditText
-            android:id="@+id/editPopup"
-            android:hint="@string/what_the_key_has_on_long_press"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content" />
-        <EditText
-            android:id="@+id/editIcon"
-            android:hint="@string/what_icon_shows_up"
-            android:layout_width="match_parent"
-            android:layout_height="wrap_content" />
-        <LinearLayout
-            android:orientation="horizontal"
-            android:layout_gravity="center"
-            android:layout_width="wrap_content"
-            android:layout_height="wrap_content">
-            <Button
-                android:id="@+id/savePopup"
-                android:text="@string/save"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content" />
-            <Button
-                android:id="@+id/exitPopup"
-                android:layout_width="wrap_content"
-                android:layout_height="wrap_content"
-                android:text="@string/cancel" />
-        </LinearLayout>
-    </LinearLayout>
-</LinearLayout>
\ No newline at end of file
diff --git a/app/src/main/res/layout/fancy.xml b/app/src/main/res/layout/fancy.xml
deleted file mode 100644
index 300befb..0000000
--- a/app/src/main/res/layout/fancy.xml
+++ /dev/null
@@ -1,75 +0,0 @@
-<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
-    android:keyWidth="10%p"
-    android:keyHeight="7%p"
-    android:layout_width="wrap_content"
-    android:layout_height="wrap_content">
-    <!--    <include android:keyboardLayout="@layout/top_row" />-->
-    <Row android:keyWidth="9.09%p">
-        <Key android:codes="-25"  android:keyIcon="@drawable/ic_double_pointer_left" />
-        <Key android:codes="-26"  android:keyIcon="@drawable/ic_double_pointer_right" />
-        <Key android:codes="-108" android:keyIcon="@drawable/ic_arrow_left"  android:isRepeatable="true" />
-        <Key android:codes="-111" android:keyIcon="@drawable/ic_arrow_right" android:isRepeatable="true" />
-        <Key android:codes="-107" android:keyIcon="@drawable/ic_arrow_up"    android:isRepeatable="true" />
-        <Key android:codes="-109" android:keyIcon="@drawable/ic_arrow_down"  android:isRepeatable="true" />
-        <Key android:codes="-76"  android:keyIcon="@drawable/ic_select" />
-        <Key android:codes="-93"  android:keyIcon="@drawable/ic_select_all" />
-        <Key android:codes="-9"   android:keyIcon="@drawable/ic_cut" />
-        <Key android:codes="-10"  android:keyIcon="@drawable/ic_copy" />
-        <Key android:codes="-152" android:keyIcon="@drawable/ic_paste_text" />
-    </Row>
-    <Row>
-        <Key android:codes="49"  android:keyLabel="1" android:popupCharacters="!" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="50"  android:keyLabel="2" android:popupCharacters="\@" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="51"  android:keyLabel="3" android:popupCharacters="#" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="52"  android:keyLabel="4" android:popupCharacters="$" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="53"  android:keyLabel="5" android:popupCharacters="%" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="54"  android:keyLabel="6" android:popupCharacters="^" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="55"  android:keyLabel="7" android:popupCharacters="&amp;" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="56"  android:keyLabel="8" android:popupCharacters="*" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="57"  android:keyLabel="9" android:popupCharacters="(" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="48"  android:keyLabel="0" android:popupCharacters=")" android:popupKeyboard="@layout/popup_template" />
-    </Row>
-    <Row>
-        <Key android:codes="587" android:keyLabel="…ã" android:popupCharacters="“©" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="447" android:keyLabel="∆ø" android:popupCharacters="—°Íöá" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="1213" android:keyLabel="“Ω" android:popupCharacters="ƒô" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="42843" android:keyLabel="Íùõ" android:popupCharacters="ÍûÉÍ≠ÖÍ≠ÜÍ≠áÍ≠àÍ≠âÍ≠äÍ≠ãÍ≠å" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="254" android:keyLabel="√æ" android:popupCharacters="≈ß—ÇÍûá" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="1199" android:keyLabel="“Ø" android:popupCharacters="—É…è" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="650" android:keyLabel=" ä" android:popupCharacters="·µ´·µæ·µø" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="305" android:keyLabel="ƒ±" android:popupCharacters="‚≤ìÍôá" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="42651" android:keyLabel="Íöõ" android:popupCharacters="·¥ï»£Íô©Í≠•" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="7466" android:keyLabel="·¥™" android:popupCharacters="œÄ–ø·¥ò·¥®‚±∑" android:popupKeyboard="@layout/popup_template" />
-    </Row>
-    <Row>
-        <Key android:codes="261" android:keyLabel="Œ±" android:popupCharacters="—ß·¥ÅƒÖ" android:popupKeyboard="@layout/popup_template" android:horizontalGap="5%p" />
-        <Key android:codes="383" android:keyLabel="≈ø" android:popupCharacters="ÍûÖÍ≠ç" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="396" android:keyLabel="∆å" android:popupCharacters="Œ¥·¥Ö·¥Ü‚≥Æ" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="402" android:keyLabel="∆í" android:popupCharacters="‚ÖéÍú∞Íùº" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="7545" android:keyLabel="·µπ" android:popupCharacters="–≥ÍùØ" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="1085" android:keyLabel="–Ω" android:popupCharacters="‚±∂" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="541" android:keyLabel="»ù" android:popupCharacters="·¥ä" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="312" android:keyLabel="ƒ∏" android:popupCharacters="…Çœü" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="322" android:keyLabel="≈Ç" android:popupCharacters="∆õ·¥å‚≤óÍûÅ" android:popupKeyboard="@layout/popup_template" />
-    </Row>
-    <Row>
-        <Key android:codes="-1"  android:keyIcon="@drawable/ic_shift"     android:keyWidth="10%p" />
-        <Key android:codes="424" android:keyLabel="∆®" android:popupCharacters="∆∂∆Ω»•" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="43859" android:keyLabel="Í≠ì" android:popupCharacters="Í≠ó" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="663" android:keyLabel=" ó" android:popupCharacters="Í¨ø" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="42857" android:keyLabel="Íù©" android:popupCharacters="" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="387" android:keyLabel="∆É" android:popupCharacters="Œ≤–±" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="11419" android:keyLabel="‚≤õ" android:popupCharacters="–∏" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="1084" android:keyLabel="–º" android:popupCharacters="—à‚≤ôÍü∫" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="-5"  android:keyIcon="@drawable/ic_backspace" android:keyWidth="10%p" android:isRepeatable="true" />
-        <Key android:codes="-7"  android:keyIcon="@drawable/ic_delete"    android:keyWidth="10%p" android:isRepeatable="true" />
-    </Row>
-    <Row>
-        <Key android:codes="-192" android:keyIcon="@drawable/ic_cmd"   android:keyWidth="14%p" />
-        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice" android:keyWidth="8%p" />
-        <Key android:codes="-4"   android:keyIcon="@drawable/ic_grid"  android:keyWidth="8%p" />
-        <Key android:codes="32"   android:keyIcon="@drawable/ic_space" android:keyWidth="40%p" android:popupCharacters="@string/popup_first"  android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="7"    android:keyIcon="@drawable/ic_tab"   android:keyWidth="10%p" android:popupCharacters="@string/popup_second" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="10"   android:keyIcon="@drawable/ic_enter" android:keyWidth="20%p" android:popupCharacters="@string/popup_third"  android:popupKeyboard="@layout/popup_template" />
-    </Row>
-</Keyboard>
diff --git a/app/src/main/res/layout/ipa.xml b/app/src/main/res/layout/ipa.xml
deleted file mode 100644
index d7a48b7..0000000
--- a/app/src/main/res/layout/ipa.xml
+++ /dev/null
@@ -1,75 +0,0 @@
-<Keyboard xmlns:android="http://schemas.android.com/apk/res/android"
-    android:keyWidth="10%p"
-    android:keyHeight="7%p"
-    android:layout_width="wrap_content"
-    android:layout_height="wrap_content">
-<!--    <include android:keyboardLayout="@layout/top_row" />-->
-    <Row android:keyWidth="9.09%p">
-        <Key android:codes="-25"  android:keyIcon="@drawable/ic_double_pointer_left" />
-        <Key android:codes="-26"  android:keyIcon="@drawable/ic_double_pointer_right" />
-        <Key android:codes="-108" android:keyIcon="@drawable/ic_arrow_left"  android:isRepeatable="true" />
-        <Key android:codes="-111" android:keyIcon="@drawable/ic_arrow_right" android:isRepeatable="true" />
-        <Key android:codes="-107" android:keyIcon="@drawable/ic_arrow_up"    android:isRepeatable="true" />
-        <Key android:codes="-109" android:keyIcon="@drawable/ic_arrow_down"  android:isRepeatable="true" />
-        <Key android:codes="-76"  android:keyIcon="@drawable/ic_select" />
-        <Key android:codes="-93"  android:keyIcon="@drawable/ic_select_all" />
-        <Key android:codes="-9"   android:keyIcon="@drawable/ic_cut" />
-        <Key android:codes="-10"  android:keyIcon="@drawable/ic_copy" />
-        <Key android:codes="-152" android:keyIcon="@drawable/ic_paste_text" />
-    </Row>
-    <Row>
-        <Key android:codes="49"  android:keyLabel="1" android:popupCharacters="ÀêÀëÀàÀå\/!" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="50"  android:keyLabel="2" android:popupCharacters="‚óå\/\@" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="51"  android:keyLabel="3" android:popupCharacters="ÃäÃ•#" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="52"  android:keyLabel="4" android:popupCharacters="ÃçÃ©$" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="53"  android:keyLabel="5" android:popupCharacters="Ã∫ÕÜÃ™%" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="54"  android:keyLabel="6" android:popupCharacters="‚Üí^" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="55"  android:keyLabel="7" android:popupCharacters="&amp;" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="56"  android:keyLabel="8" android:popupCharacters="ÃΩÃ†ÃùÃûÃòÃô*" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="57"  android:keyLabel="9" android:popupCharacters="([‚ü®{&lt;" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="48"  android:keyLabel="0" android:popupCharacters=")]‚ü©}&gt;" android:popupKeyboard="@layout/popup_template" />
-    </Row>
-    <Row>
-        <Key android:codes="113" android:keyLabel="q" android:popupCharacters="…ã †" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="119" android:keyLabel="w" android:popupCharacters=" ç…∞…∑" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="101" android:keyLabel="e" android:popupCharacters="…ò…ô…õ…ú…û…ö…ù·¥á‚±ª" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="114" android:keyLabel="r" android:popupCharacters="…æ…π…Ω…ª…∫ Ä Å…º·¥ô·¥ö" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="116" android:keyLabel="t" android:popupCharacters="Œ∏ à∆≠ á»∂ ¶ ß ®" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="121" android:keyLabel="y" android:popupCharacters=" è…§…•" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="117" android:keyLabel="u" android:popupCharacters=" ä…Ø â" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="105" android:keyLabel="i" android:popupCharacters="ƒ±…™…©…®…ø Ö" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="111" android:keyLabel="o" android:popupCharacters="…î≈ì√∏…µ…∂" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="112" android:keyLabel="p" android:popupCharacters="»π∆•" android:popupKeyboard="@layout/popup_template" />
-    </Row>
-    <Row>
-        <Key android:codes="97"  android:keyLabel="a" android:popupCharacters="…ë…ê…í å√¶·∂è·∂ê·¥Ä" android:popupKeyboard="@layout/popup_template" android:horizontalGap="5%p" />
-        <Key android:codes="115" android:keyLabel="s" android:popupCharacters=" É Ç Ü∆™" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="100" android:keyLabel="d" android:popupCharacters="√∞…ñ…ó·∂ë»° £ § •" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="102" android:keyLabel="f" android:popupCharacters="…∏ ©" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="103" android:keyLabel="…°" android:popupCharacters="…£…¢g…† õ" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="104" android:keyLabel="h" android:popupCharacters="…¶ƒß ú…ß" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="106" android:keyLabel="j" android:popupCharacters="…ü ù»∑ Ñ" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="107" android:keyLabel="k" android:popupCharacters=" î∆ô û ° ï ¢ ñ" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="108" android:keyLabel="l" android:popupCharacters="…¨…Æ é…≠Íûé ü…´ ™ ´Œª∆õ≈Ç»¥" android:popupKeyboard="@layout/popup_template" />
-    </Row>
-    <Row>
-        <Key android:codes="-1"  android:keyIcon="@drawable/ic_shift"     android:keyWidth="10%p" />
-        <Key android:codes="122" android:keyLabel="z" android:popupCharacters=" í ê ë ì∆∫" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="120" android:keyLabel="x" android:popupCharacters="œáÍ≠ì" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="99"  android:keyLabel="c" android:popupCharacters="√ß∆à…ï ó" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="118" android:keyLabel="v" android:popupCharacters=" ã‚±±" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="98"  android:keyLabel="b" android:popupCharacters="…ìŒ≤ ô»∏" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="110" android:keyLabel="n" android:popupCharacters="≈ã…≥…≤…¥»µ∆û" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="109" android:keyLabel="m" android:popupCharacters="…±" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="-5"  android:keyIcon="@drawable/ic_backspace" android:keyWidth="10%p" android:isRepeatable="true" />
-        <Key android:codes="-7"  android:keyIcon="@drawable/ic_delete"    android:keyWidth="10%p" android:isRepeatable="true" />
-    </Row>
-    <Row>
-        <Key android:codes="-192" android:keyIcon="@drawable/ic_cmd"   android:keyWidth="14%p" />
-        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice" android:keyWidth="8%p" />
-        <Key android:codes="-4"   android:keyIcon="@drawable/ic_grid"  android:keyWidth="8%p" />
-        <Key android:codes="32"   android:keyIcon="@drawable/ic_space" android:keyWidth="40%p" android:popupCharacters="@string/popup_first"  android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="7"    android:keyIcon="@drawable/ic_tab"   android:keyWidth="10%p" android:popupCharacters="@string/popup_second" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="10"   android:keyIcon="@drawable/ic_enter" android:keyWidth="20%p" android:popupCharacters="@string/popup_third"  android:popupKeyboard="@layout/popup_template" />
-    </Row>
-</Keyboard>
diff --git a/app/src/main/res/layout/layouts.xml b/app/src/main/res/layout/layouts.xml
index 491ceac..eada932 100644
--- a/app/src/main/res/layout/layouts.xml
+++ b/app/src/main/res/layout/layouts.xml
@@ -1,7 +1,8 @@
 <Keyboard xmlns:android="http://schemas.android.com/apk/res/android" 
-    android:keyHeight="7%p"
+    android:keyHeight="7%p" 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content">
+    <!-- <Row></Row> -->
     <Row android:keyHeight="7%p" android:keyWidth="9.09%p">
         <Key android:codes="-25"  android:keyIcon="@drawable/ic_double_pointer_left" />
         <Key android:codes="-26"  android:keyIcon="@drawable/ic_double_pointer_right" />
@@ -15,7 +16,7 @@
         <Key android:codes="-10"  android:keyIcon="@drawable/ic_copy" />
         <Key android:codes="-11"  android:keyIcon="@drawable/ic_paste" />
     </Row>
-    <Row android:keyHeight="3.111%p" android:keyWidth="16.67%p">
+    <Row android:keyHeight="7%p" android:keyWidth="16.67%p">
         <Key android:codes="-400"  android:keyLabel="Layout 1" />
         <Key android:codes="-401"  android:keyLabel="Layout 2" />
         <Key android:codes="-402"  android:keyLabel="Layout 3" />
@@ -23,7 +24,7 @@
         <Key android:codes="-404"  android:keyLabel="Layout 5" />
         <Key android:codes="-405"  android:keyLabel="Layout 6" />
     </Row>
-    <Row android:keyHeight="3.111%p" android:keyWidth="16.67%p">
+    <Row android:keyHeight="7%p" android:keyWidth="16.67%p">
         <Key android:codes="-406"  android:keyLabel="Layout 7" />
         <Key android:codes="-407"  android:keyLabel="Layout 8" />
         <Key android:codes="-408"  android:keyLabel="Layout 9" />
@@ -31,7 +32,7 @@
         <Key android:codes="-410"  android:keyLabel="Layout 11" />
         <Key android:codes="-411"  android:keyLabel="Layout 12" />
     </Row>
-    <Row android:keyHeight="3.111%p" android:keyWidth="16.67%p">
+    <Row android:keyHeight="7%p" android:keyWidth="16.67%p">
         <Key android:codes="-412"  android:keyLabel="Layout 13" />
         <Key android:codes="-413"  android:keyLabel="Layout 14" />
         <Key android:codes="-414"  android:keyLabel="Layout 15" />
@@ -39,7 +40,7 @@
         <Key android:codes="-416"  android:keyLabel="Layout 17" />
         <Key android:codes="-417"  android:keyLabel="Layout 18" />
     </Row>
-    <Row android:keyHeight="3.111%p" android:keyWidth="16.67%p">
+    <Row android:keyHeight="7%p" android:keyWidth="16.67%p">
         <Key android:codes="-418"  android:keyLabel="Layout 19" />
         <Key android:codes="-419"  android:keyLabel="Layout 20" />
         <Key android:codes="-420"  android:keyLabel="Layout 21" />
@@ -47,6 +48,7 @@
         <Key android:codes="-422"  android:keyLabel="Layout 23" />
         <Key android:codes="-423"  android:keyLabel="Layout 24" />
     </Row>
+<!--
     <Row android:keyHeight="3.111%p" android:keyWidth="16.67%p">
         <Key android:codes="-424"  android:keyLabel="Layout 25" />
         <Key android:codes="-425"  android:keyLabel="Layout 26" />
@@ -87,13 +89,14 @@
         <Key android:codes="-452"  android:keyLabel="Layout 46" />
         <Key android:codes="-453"  android:keyLabel="Layout 47" />
     </Row>
+-->
     <Row android:keyHeight="7%p">
-        <Key android:codes="-148" android:keyIcon="@drawable/ic_settings"     android:keyWidth="14%p" />
-        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice"        android:keyWidth="8%p" />
-        <Key android:codes="-142" android:keyIcon="@drawable/ic_abc"          android:keyWidth="8%p" />
-        <Key android:codes="32"   android:keyIcon="@drawable/ic_space"        android:keyWidth="40%p" android:popupCharacters="@string/popup_first" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="-3"   android:keyIcon="@drawable/ic_keyboard"      />
-        <Key android:codes="-175" android:keyIcon="@drawable/ic_input"         />
-        <Key android:codes="-2"   android:keyIcon="@drawable/ic_keyboard_hide" />
+        <Key android:codes="-148" android:keyIcon="@drawable/ic_settings"       android:keyWidth="14%p" />
+        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice"          android:keyWidth="8%p" />
+        <Key android:codes="-142"   android:keyIcon="@drawable/ic_abc"          android:keyWidth="8%p" />
+        <Key android:codes="32"    android:keyIcon="@drawable/ic_space"         android:keyWidth="40%p" android:popupCharacters="@string/popup_first" android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="-3"    android:keyIcon="@drawable/ic_keyboard"      />
+        <Key android:codes="-175"  android:keyIcon="@drawable/ic_input"         />
+        <Key android:codes="-2"    android:keyIcon="@drawable/ic_keyboard_hide" />
     </Row>
 </Keyboard>
\ No newline at end of file
diff --git a/app/src/main/res/layout/macros.xml b/app/src/main/res/layout/macros.xml
index 7a7ee69..7539827 100644
--- a/app/src/main/res/layout/macros.xml
+++ b/app/src/main/res/layout/macros.xml
@@ -24,10 +24,10 @@
         <Key android:codes="0" android:keyOutputText=".com"     android:keyLabel=".com" android:popupCharacters="" android:popupKeyboard="@layout/popup_template" />
         <Key android:codes="-97" android:keyIcon="@drawable/ic_date" />
         <Key android:codes="-98" android:keyIcon="@drawable/ic_time" />
-        <Key android:codes="-509" android:keyOutputText="@string/name"    android:keyIcon="@drawable/ic_name" />
-        <Key android:codes="-510" android:keyOutputText="@string/email"   android:keyIcon="@drawable/ic_email" />
-        <Key android:codes="-511" android:keyOutputText="@string/phone"   android:keyIcon="@drawable/ic_phone" />
-        <Key android:codes="-512" android:keyOutputText="@string/address" android:keyIcon="@drawable/ic_address" />
+        <Key android:codes="0" android:keyOutputText="@string/name"    android:keyIcon="@drawable/ic_name" />
+        <Key android:codes="0" android:keyOutputText="@string/email"   android:keyIcon="@drawable/ic_email" />
+        <Key android:codes="0" android:keyOutputText="@string/phone"   android:keyIcon="@drawable/ic_phone" />
+        <Key android:codes="0" android:keyOutputText="@string/address" android:keyIcon="@drawable/ic_address" />
     </Row>
     <Row android:keyWidth="20%p">
         <Key android:codes="-501" android:keyOutputText="@string/k1" android:keyLabel="@string/k1_label" />
@@ -46,8 +46,8 @@
         <Key android:keyOutputText="–ê–ë–í–ì–î–ï–ñ–ó–ò–ô–ö–õ–ú–ù–û–ü–†–°–¢–£–§–•–¶–ß–®–©–™–´–¨–≠–Æ–Ø" android:keyLabel="–ê–ë–ì" android:keyWidth="10%p" />
     </Row>
     <Row>
-        <Key android:codes="8206"   android:keyLabel="LRM"  android:keyWidth="10%p" />
-        <Key android:codes="8237"   android:keyLabel="LRO"  android:keyWidth="10%p" />
+        <Key android:codes="8206" android:keyLabel="LRM"  android:keyWidth="10%p" />
+        <Key android:codes="8237" android:keyLabel="LRO"  android:keyWidth="10%p" />
         <Key android:codes="-100"   android:keyLabel="nbsp" android:keyWidth="10%p" />
         <Key android:codes="\u200B" android:keyIcon="@drawable/ic_zwsp_plus"  android:keyWidth="10%p" /> 
         <Key android:codes="-172"   android:keyIcon="@drawable/ic_zwsp_arrow" android:keyWidth="10%p" />
@@ -60,11 +60,11 @@
         <Key android:codes="-7"     android:keyIcon="@drawable/ic_delete"    android:keyWidth="10%p" android:isRepeatable="true" />
     </Row>
     <Row>
-        <Key android:codes="-192" android:keyIcon="@drawable/ic_cmd"   android:keyWidth="14%p" />
-        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice" android:keyWidth="8%p" />
-        <Key android:codes="-4"   android:keyIcon="@drawable/ic_grid"  android:keyWidth="8%p" />
-        <Key android:codes="32"   android:keyIcon="@drawable/ic_space" android:keyWidth="40%p" android:popupCharacters="@string/popup_first" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="7"    android:keyIcon="@drawable/ic_tab"   android:keyWidth="10%p" android:popupCharacters="@string/popup_second" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="10"   android:keyIcon="@drawable/ic_enter" android:keyWidth="20%p" android:popupCharacters="@string/popup_third" android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="-192" android:keyIcon="@drawable/ic_cmd"                android:keyWidth="14%p" />
+        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice"              android:keyWidth="8%p" />
+        <Key android:codes="-4"   android:keyIcon="@drawable/ic_grid"               android:keyWidth="8%p" />
+        <Key android:codes="32"   android:keyIcon="@drawable/ic_space"              android:keyWidth="40%p" android:popupCharacters="@string/popup_first" android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="7"    android:keyIcon="@drawable/ic_tab"                android:keyWidth="10%p" android:popupCharacters="@string/popup_second" android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="10"   android:keyIcon="@drawable/ic_enter"              android:keyWidth="20%p" android:popupCharacters="@string/popup_third" android:popupKeyboard="@layout/popup_template" />
     </Row>
 </Keyboard>
diff --git a/app/src/main/res/layout/primary.xml b/app/src/main/res/layout/primary.xml
index de0903c..4f3ac80 100644
--- a/app/src/main/res/layout/primary.xml
+++ b/app/src/main/res/layout/primary.xml
@@ -3,7 +3,25 @@
     android:keyHeight="7%p"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content">
-<!--    <include android:keyboardLayout="@layout/top_row" />-->
+    <!-- 
+    <Row android:keyWidth="8.333%p" android:keyHeight="7%p">
+        <Key android:codes="-148" android:keyIcon="@drawable/ic_settings" />
+        <Key android:codes="-150" android:keyIcon="@drawable/ic_undo" />
+        <Key android:codes="29"   android:keyWidth="22.223%p" />
+        <Key android:codes="30"   android:keyWidth="22.223%p" />
+        <Key android:codes="31"   android:keyWidth="22.223%p" />
+        <Key android:codes="-94"  android:keyIcon="@drawable/ic_duplicate_lines" />
+        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice" />
+         -->
+        <!-- 
+        <Key android:codes="-301" android:keyIcon="@drawable/ic_function" />
+        <Key android:codes="-302" android:keyIcon="@drawable/ic_utility" />
+        <Key android:codes="-303" android:keyIcon="@drawable/ic_emoji" />
+        <Key android:codes="-304" android:keyIcon="@drawable/ic_nav" />
+        <Key android:codes="-305" android:keyIcon="@drawable/ic_symbol" />
+        <Key android:codes="-306" android:keyIcon="@drawable/ic_format_font" />
+         -->
+    <!-- </Row> -->
     <Row android:keyWidth="9.09%p">
         <Key android:codes="-25"  android:keyIcon="@drawable/ic_double_pointer_left" />
         <Key android:codes="-26"  android:keyIcon="@drawable/ic_double_pointer_right" />
@@ -31,7 +49,7 @@
     </Row>
     <Row>
         <Key android:codes="113" android:keyLabel="q" android:popupCharacters="~" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="119" android:keyLabel="w" android:popupCharacters="‚Ä¢" android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="119" android:keyLabel="w" android:popupCharacters="¬∞" android:popupKeyboard="@layout/popup_template" />
         <Key android:codes="101" android:keyLabel="e" android:popupCharacters="Œá" android:popupKeyboard="@layout/popup_template" />
         <Key android:codes="114" android:keyLabel="r" android:popupCharacters="|" android:popupKeyboard="@layout/popup_template" />
         <Key android:codes="116" android:keyLabel="t" android:popupCharacters="[" android:popupKeyboard="@layout/popup_template" />
@@ -65,11 +83,12 @@
         <Key android:codes="-7"  android:keyIcon="@drawable/ic_delete"    android:keyWidth="10%p" android:isRepeatable="true" />
     </Row>
     <Row>
-        <Key android:codes="-192" android:keyIcon="@drawable/ic_cmd"   android:keyWidth="14%p" />
-        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice" android:keyWidth="8%p" />
-        <Key android:codes="-4"   android:keyIcon="@drawable/ic_grid"  android:keyWidth="8%p" />
-        <Key android:codes="32"   android:keyIcon="@drawable/ic_space" android:keyWidth="40%p" android:popupCharacters="@string/popup_first"  android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="7"    android:keyIcon="@drawable/ic_tab"   android:keyWidth="10%p" android:popupCharacters="@string/popup_second" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="10"   android:keyIcon="@drawable/ic_enter" android:keyWidth="20%p" android:popupCharacters="@string/popup_third"  android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="-192" android:keyIcon="@drawable/ic_cmd"                    android:keyWidth="14%p" />
+        <Key android:codes="-149" android:keyIcon="@drawable/ic_voice"                  android:keyWidth="8%p" />
+        <Key android:codes="-4"   android:keyIcon="@drawable/ic_grid"                   android:keyWidth="8%p" />
+        <Key android:codes="32"   android:keyIcon="@drawable/ic_space"                  android:keyWidth="40%p" android:popupCharacters="@string/popup_first" android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="7"    android:keyIcon="@drawable/ic_tab"                    android:keyWidth="10%p" android:popupCharacters="@string/popup_second" android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="10"   android:keyIcon="@drawable/ic_enter"                  android:keyWidth="20%p" />
+        <!-- android:popupCharacters="@string/popup_third" android:popupKeyboard="@layout/popup_template" -->
     </Row>
 </Keyboard>
diff --git a/app/src/main/res/layout/symbol.xml b/app/src/main/res/layout/symbol.xml
index 9601a90..e1c5b22 100644
--- a/app/src/main/res/layout/symbol.xml
+++ b/app/src/main/res/layout/symbol.xml
@@ -59,7 +59,7 @@
     </Row>
     <Row android:keyWidth="10%p">
         <Key android:codes="45"     android:keyLabel="-"    android:popupCharacters="_‚Äê‚Äë‚Äí‚Äì‚Äî‚Äï¬Ø" android:popupKeyboard="@layout/popup_template" />
-        <Key android:codes="8226"   android:keyLabel="‚Ä¢"    android:popupCharacters="¬∞‚óå‚àô‚Ä¢‚Ä¶‚Ñâ‚ÑÉ"      android:popupKeyboard="@layout/popup_template" />
+        <Key android:codes="8226"   android:keyLabel="‚Ä¢"    android:popupCharacters="‚óå¬∞‚àô‚Ä¢‚Ä¶‚Ñâ‚ÑÉ"      android:popupKeyboard="@layout/popup_template" />
         <Key android:codes="58"     android:keyLabel=":"    android:popupCharacters="¬®"      android:popupKeyboard="@layout/popup_template" />
         <Key android:codes="47"     android:keyLabel="/"    android:popupCharacters="√∑\\|¬¶"      android:popupKeyboard="@layout/popup_template" />
         <Key android:codes="59"     android:keyLabel=";"    android:popupCharacters="¬ß‚Åã¬∂‚ù°"     android:popupKeyboard="@layout/popup_template" />
diff --git a/app/src/main/res/layout/top_row.xml b/app/src/main/res/layout/top_row.xml
deleted file mode 100644
index 53d6f08..0000000
--- a/app/src/main/res/layout/top_row.xml
+++ /dev/null
@@ -1,15 +0,0 @@
-<merge xmlns:android="http://schemas.android.com/apk/res/android">
-    <Row android:keyWidth="9.09%p">
-        <Key android:codes="-25"  android:keyIcon="@drawable/ic_double_pointer_left" />
-        <Key android:codes="-26"  android:keyIcon="@drawable/ic_double_pointer_right" />
-        <Key android:codes="-108" android:keyIcon="@drawable/ic_arrow_left"  android:isRepeatable="true" />
-        <Key android:codes="-111" android:keyIcon="@drawable/ic_arrow_right" android:isRepeatable="true" />
-        <Key android:codes="-107" android:keyIcon="@drawable/ic_arrow_up"    android:isRepeatable="true" />
-        <Key android:codes="-109" android:keyIcon="@drawable/ic_arrow_down"  android:isRepeatable="true" />
-        <Key android:codes="-76"  android:keyIcon="@drawable/ic_select" />
-        <Key android:codes="-93"  android:keyIcon="@drawable/ic_select_all" />
-        <Key android:codes="-9"   android:keyIcon="@drawable/ic_cut" />
-        <Key android:codes="-10"  android:keyIcon="@drawable/ic_copy" />
-        <Key android:codes="-152" android:keyIcon="@drawable/ic_paste_text" />
-    </Row>
-</merge>
\ No newline at end of file
diff --git a/app/src/main/res/values/colors.xml b/app/src/main/res/values/colors.xml
index ff66434..c7d9954 100644
--- a/app/src/main/res/values/colors.xml
+++ b/app/src/main/res/values/colors.xml
@@ -1,11 +1,11 @@
 <resources>
-<color name="primary">#3F51B5</color>
-<color name="primary_dark">#303F9F</color>
-<color name="accent">#FF4081</color>
-<color name="transparent">#00000000</color>
-<color name="white">#FFFFFF</color>
-<color name="translucent">#C0000000</color>
-<color name="candidate_normal">#FFFFFFFF</color>
-<color name="candidate_recommended">#FFFFFFFF</color>
-<color name="candidate_other">#FFFFFFFF</color>
+    <color name="primary">#3F51B5</color>
+    <color name="primary_dark">#303F9F</color>
+    <color name="accent">#FF4081</color>
+    <color name="transparent">#00000000</color>
+    <color name="white">#FFFFFF</color>
+    <color name="translucent">#C0000000</color>
+    <color name="candidate_normal">#FFFFFFFF</color>
+    <color name="candidate_recommended">#FFFFFFFF</color>
+    <color name="candidate_other">#FFFFFFFF</color>
 </resources>
diff --git a/app/src/main/res/values/strings.xml b/app/src/main/res/values/strings.xml
index ae697d3..101fd77 100644
--- a/app/src/main/res/values/strings.xml
+++ b/app/src/main/res/values/strings.xml
@@ -27,16 +27,4 @@
     <string name="popup_8">*√ó="</string>
     <string name="popup_9">([{&lt;‚ßº‚ßô‚ßõ"</string>
     <string name="popup_0">)]}&gt;‚ßΩ‚ßò‚ßö"</string>
-    <string name="edit_space_bar">Edit Space Bar</string>
-    <string name="edit_tab_key">Edit Tab Key</string>
-    <string name="edit_enter_key">Edit Enter Key</string>
-    <string name="what_the_key_shows">What the key shows</string>
-    <string name="what_the_key_sends">What the key sends</string>
-    <string name="edit_key">Edit Key</string>
-    <string name="what_the_key_has_on_long_press">What the key has on long press</string>
-    <string name="what_icon_shows_up">What icon shows up</string>
-    <string name="save">Save</string>
-    <string name="cancel">Cancel</string>
-    <string name="foreground_color">Foreground Color</string>
-    <string name="background_color">Background Color</string>
 </resources>
diff --git a/app/src/main/res/xml/preferences.xml b/app/src/main/res/xml/preferences.xml
index 7e8c15f..b7fe030 100644
--- a/app/src/main/res/xml/preferences.xml
+++ b/app/src/main/res/xml/preferences.xml
@@ -7,7 +7,7 @@
         <SwitchPreference       android:title="Autocorrect"                 android:key="auto"                      android:defaultValue="false" />
         <SwitchPreference       android:title="Autocapitalization"          android:key="autocaps"                  android:defaultValue="false" />
         <SwitchPreference       android:title="Insert Pairs"                android:key="pairs"                     android:defaultValue="false" />
-        <SwitchPreference       android:title="Toggle Selection Case"       android:key="shift"                     android:defaultValue="false" />
+        <SwitchPreference       android:title="Toggle Selection Case"       android:key="shift"                     android:defaultValue="true" />
         <SwitchPreference       android:title="Indentation Helper"          android:key="indent"                    android:defaultValue="true" />
         <EditTextPreference     android:title="Word Separators"             android:key="seps"                      android:defaultValue="@string/word_separators" android:dialogTitle="Word Separators" android:summary="@string/word_separators" android:dialogMessage="" />
     </PreferenceScreen>
@@ -19,22 +19,20 @@
         <SwitchPreference       android:title="Show Layout Names"           android:key="names"                     android:defaultValue="true" />
     </PreferenceScreen>
     <PreferenceScreen           android:title="Layouts">
-        <CheckBoxPreference     android:title="All"                         android:key="all"                       android:defaultValue="true" android:summaryOff="Enable All"                     android:summaryOn="Disable All" />
+        <CheckBoxPreference     android:title="All"                         android:key="all"                       android:defaultValue="false" android:summaryOff="Enable All"                     android:summaryOn="Disable All" />
         <PreferenceCategory     android:title="Primary"                     android:key="primary_category">
             <CheckBoxPreference android:title="Accents"                     android:key="accents"                   android:defaultValue="true" />
             <CheckBoxPreference android:title="Emoji"                       android:key="emoji"                     android:defaultValue="true" />
-            <CheckBoxPreference android:title="Fancy"                       android:key="fancy"                     android:defaultValue="true" />
             <CheckBoxPreference android:title="Function"                    android:key="function"                  android:defaultValue="true" />
-            <CheckBoxPreference android:title="Hex"                         android:key="hex"                       android:defaultValue="true" />
-            <CheckBoxPreference android:title="IPA"                         android:key="ipa"                       android:defaultValue="true" />
+            <CheckBoxPreference android:title="Hex"                         android:key="hex"                       android:defaultValue="false" />
             <CheckBoxPreference android:title="Macros"                      android:key="macros"                    android:defaultValue="true" />
             <CheckBoxPreference android:title="Navigation"                  android:key="navigation"                android:defaultValue="true" />
-            <CheckBoxPreference android:title="Numeric"                     android:key="numeric"                   android:defaultValue="true" />
-            <CheckBoxPreference android:title="Shortcuts"                   android:key="shortcuts"                 android:defaultValue="true" />
+            <CheckBoxPreference android:title="Numeric"                     android:key="numeric"                   android:defaultValue="false" />
+            <CheckBoxPreference android:title="Shortcuts"                   android:key="shortcuts"                 android:defaultValue="false" />
             <CheckBoxPreference android:title="Symbol"                      android:key="symbol"                    android:defaultValue="true" />
             <CheckBoxPreference android:title="Unicode"                     android:key="unicode"                   android:defaultValue="true" />
             <CheckBoxPreference android:title="Utility"                     android:key="utility"                   android:defaultValue="true" />
-            <CheckBoxPreference android:title="URL"                         android:key="url"                       android:defaultValue="true" />
+            <CheckBoxPreference android:title="URL"                         android:key="url"                       android:defaultValue="false" />
         </PreferenceCategory>
         <CheckBoxPreference     android:title="Custom Layout Order"         android:key="custom_order"              android:defaultValue="false" />
         <EditTextPreference     android:title="Layout Order"                android:key="layout_order"              android:defaultValue="" android:dialogTitle="Layout Order" android:persistent="true" android:lines="5" android:dialogMessage="" />
diff --git a/bin/custom-keyboard.signed.apk b/bin/custom-keyboard.signed.apk
index f1afe87..e411c34 100644
Binary files a/bin/custom-keyboard.signed.apk and b/bin/custom-keyboard.signed.apk differ
diff --git a/build.gradle b/build.gradle
index c30a48b..8a44491 100644
--- a/build.gradle
+++ b/build.gradle
@@ -4,7 +4,7 @@ buildscript {
         google()
     }
     dependencies {
-        classpath 'com.android.tools.build:gradle:4.0.1'
+        classpath 'com.android.tools.build:gradle:3.6.1'
     }
 }
 
diff --git a/gradle.properties b/gradle.properties
index 1e0c1d3..aac7c9b 100644
--- a/gradle.properties
+++ b/gradle.properties
@@ -9,11 +9,9 @@
 
 # Specifies the JVM arguments used for the daemon process.
 # The setting is particularly useful for tweaking memory settings.
-android.enableJetifier=true
-android.useAndroidX=true
 org.gradle.jvmargs=-Xmx1536m
 
 # When configured, Gradle will run in incubating parallel mode.
 # This option should only be used with decoupled projects. More details, visit
 # http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects
-# org.gradle.parallel=true
\ No newline at end of file
+# org.gradle.parallel=true
diff --git a/gradle/wrapper/gradle-wrapper.properties b/gradle/wrapper/gradle-wrapper.properties
index 0dfdb09..bdc9cca 100644
--- a/gradle/wrapper/gradle-wrapper.properties
+++ b/gradle/wrapper/gradle-wrapper.properties
@@ -1,6 +1,6 @@
-#Fri Aug 14 22:28:55 EDT 2020
+#Tue Mar 17 09:44:13 EDT 2020
 distributionBase=GRADLE_USER_HOME
 distributionPath=wrapper/dists
 zipStoreBase=GRADLE_USER_HOME
 zipStorePath=wrapper/dists
-distributionUrl=https\://services.gradle.org/distributions/gradle-6.1.1-all.zip
+distributionUrl=https\://services.gradle.org/distributions/gradle-5.6.4-all.zip
